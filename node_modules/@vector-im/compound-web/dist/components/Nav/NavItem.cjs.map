{"version":3,"file":"NavItem.cjs","sources":["../../../src/components/Nav/NavItem.tsx"],"sourcesContent":["/*\nCopyright 2023 New Vector Ltd.\nCopyright 2022 The Matrix.org Foundation C.I.C.\n\nSPDX-License-Identifier: AGPL-3.0-only OR LicenseRef-Element-Commercial\nPlease see LICENSE files in the repository root for full details.\n*/\n\nimport React, {\n  type AnchorHTMLAttributes,\n  type ButtonHTMLAttributes,\n  type ForwardedRef,\n  type MouseEventHandler,\n  forwardRef,\n} from \"react\";\n\nimport styles from \"./Nav.module.css\";\n\ntype NavItemProps = {\n  active?: boolean;\n  \"aria-controls\"?: string;\n};\n\ntype NavItemLinkProps = Omit<\n  AnchorHTMLAttributes<HTMLAnchorElement>,\n  \"style\" | \"className\"\n> & {\n  href: string;\n} & NavItemProps;\n\ntype NavItemButtonProps = Omit<\n  ButtonHTMLAttributes<HTMLButtonElement>,\n  \"style\" | \"className\"\n> & {\n  onClick: MouseEventHandler<HTMLButtonElement>;\n} & NavItemProps;\n\nconst NavItemLink = forwardRef(function NavItemLink(\n  {\n    children,\n    href,\n    onClick,\n    ...rest\n  }: React.PropsWithChildren<NavItemLinkProps>,\n  ref: ForwardedRef<HTMLAnchorElement>,\n) {\n  return (\n    <a\n      href={href}\n      onClick={onClick}\n      className={styles[\"nav-item\"]}\n      {...rest}\n      ref={ref}\n    >\n      {children}\n    </a>\n  );\n});\n\nconst NavItemButton = forwardRef(function NavItemButton(\n  {\n    children,\n    disabled,\n    onClick,\n    ...rest\n  }: React.PropsWithChildren<NavItemButtonProps>,\n  ref: ForwardedRef<HTMLButtonElement>,\n) {\n  return (\n    <button\n      onClick={onClick}\n      className={styles[\"nav-item\"]}\n      disabled={disabled}\n      ref={ref}\n      {...rest}\n    >\n      {children}\n    </button>\n  );\n});\n\nconst renderAsLink = (\n  props: React.PropsWithChildren<NavItemLinkProps | NavItemButtonProps>,\n): props is React.PropsWithChildren<NavItemLinkProps> =>\n  \"href\" in props && !!props.href;\n\n/**\n * A navigation item component to be used with a navigation bar.\n * Will render an anchor when href is provided, otherwise a button element.\n */\nexport const NavItem = forwardRef(function NavItem(\n  props: React.PropsWithChildren<NavItemLinkProps | NavItemButtonProps>,\n  ref:\n    | ForwardedRef<HTMLButtonElement | null>\n    | ForwardedRef<HTMLAnchorElement | null>,\n) {\n  /**\n   * For accessibility rules related to tabs,\n   * see https://www.w3.org/WAI/ARIA/apg/patterns/tabs/#wai-ariaroles,states,andproperties\n   *\n   * For accessibility rules related to navigation,\n   * see https://www.digitala11y.com/navigation-role/\n   */\n  const ariaControls = props[\"aria-controls\"];\n  const isUsedAsTabs = !!ariaControls;\n  const a11yAttributes = isUsedAsTabs\n    ? {\n        // when used as tabs\n        \"aria-controls\": ariaControls,\n        role: \"tab\",\n        \"aria-selected\": props.active,\n      }\n    : {\n        // when used as navigation elements\n        \"aria-current\": props.active ? true : undefined,\n      };\n\n  // All the attributes except `active` can be passed to the button/a element.\n  const propsForChild = { ...props };\n  delete propsForChild[\"active\"];\n\n  // Depending on whether `href` is in props, we render link/button\n  let navItem: React.ReactNode;\n  if (renderAsLink(propsForChild)) {\n    const buttonRef = ref as ForwardedRef<HTMLAnchorElement | null>;\n    navItem = (\n      <NavItemLink {...propsForChild} {...a11yAttributes} ref={buttonRef} />\n    );\n  } else {\n    const buttonRef = ref as ForwardedRef<HTMLButtonElement | null>;\n    navItem = (\n      <NavItemButton {...propsForChild} {...a11yAttributes} ref={buttonRef} />\n    );\n  }\n\n  return (\n    <li\n      className={styles[\"nav-tab\"]}\n      data-current={props.active ? true : undefined}\n      role=\"presentation\"\n    >\n      {navItem}\n    </li>\n  );\n});\n"],"names":["forwardRef","NavItemLink","jsx","styles","NavItemButton","NavItem"],"mappings":";;;;;AAqCA,MAAM,cAAcA,MAAAA,WAAW,SAASC,aACtC;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA,GAAG;AACL,GACA,KACA;AACA,SACEC,2BAAAA;AAAAA,IAAC;AAAA,IAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA,WAAWC,WAAAA,QAAO,UAAU;AAAA,MAC3B,GAAG;AAAA,MACJ;AAAA,MAEC;AAAA,IAAA;AAAA,EAAA;AAGP,CAAC;AAED,MAAM,gBAAgBH,MAAAA,WAAW,SAASI,eACxC;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA,GAAG;AACL,GACA,KACA;AACA,SACEF,2BAAAA;AAAAA,IAAC;AAAA,IAAA;AAAA,MACC;AAAA,MACA,WAAWC,WAAAA,QAAO,UAAU;AAAA,MAC5B;AAAA,MACA;AAAA,MACC,GAAG;AAAA,MAEH;AAAA,IAAA;AAAA,EAAA;AAGP,CAAC;AAED,MAAM,eAAe,CACnB,UAEA,UAAU,SAAS,CAAC,CAAC,MAAM;AAMtB,MAAM,UAAUH,MAAAA,WAAW,SAASK,SACzC,OACA,KAGA;AAQA,QAAM,eAAe,MAAM,eAAe;AAC1C,QAAM,eAAe,CAAC,CAAC;AACvB,QAAM,iBAAiB,eACnB;AAAA;AAAA,IAEE,iBAAiB;AAAA,IACjB,MAAM;AAAA,IACN,iBAAiB,MAAM;AAAA,EAAA,IAEzB;AAAA;AAAA,IAEE,gBAAgB,MAAM,SAAS,OAAO;AAAA,EAAA;AAI5C,QAAM,gBAAgB,EAAE,GAAG,MAAA;AAC3B,SAAO,cAAc,QAAQ;AAG7B,MAAI;AACJ,MAAI,aAAa,aAAa,GAAG;AAC/B,UAAM,YAAY;AAClB,6CACG,aAAA,EAAa,GAAG,eAAgB,GAAG,gBAAgB,KAAK,WAAW;AAAA,EAExE,OAAO;AACL,UAAM,YAAY;AAClB,6CACG,eAAA,EAAe,GAAG,eAAgB,GAAG,gBAAgB,KAAK,WAAW;AAAA,EAE1E;AAEA,SACEH,2BAAAA;AAAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAWC,WAAAA,QAAO,SAAS;AAAA,MAC3B,gBAAc,MAAM,SAAS,OAAO;AAAA,MACpC,MAAK;AAAA,MAEJ,UAAA;AAAA,IAAA;AAAA,EAAA;AAGP,CAAC;;"}