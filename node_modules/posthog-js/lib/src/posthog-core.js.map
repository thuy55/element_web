{"version":3,"file":"posthog-core.js","sourceRoot":"","sources":["../../src/posthog-core.ts"],"names":[],"mappings":"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","sourcesContent":["import { Autocapture } from './autocapture'\nimport Config from './config'\nimport { ConsentManager, ConsentStatus } from './consent'\nimport {\n    ALIAS_ID_KEY,\n    COOKIELESS_MODE_FLAG_PROPERTY,\n    COOKIELESS_SENTINEL_VALUE,\n    ENABLE_PERSON_PROCESSING,\n    FLAG_CALL_REPORTED,\n    PEOPLE_DISTINCT_ID_KEY,\n    SURVEYS_REQUEST_TIMEOUT_MS,\n    USER_STATE,\n} from './constants'\nimport { DeadClicksAutocapture, isDeadClicksEnabledForAutocapture } from './extensions/dead-clicks-autocapture'\nimport { ExceptionObserver } from './extensions/exception-autocapture'\nimport { HistoryAutocapture } from './extensions/history-autocapture'\nimport { setupSegmentIntegration } from './extensions/segment-integration'\nimport { SentryIntegration, sentryIntegration, SentryIntegrationOptions } from './extensions/sentry-integration'\nimport { Toolbar } from './extensions/toolbar'\nimport { TracingHeaders } from './extensions/tracing-headers'\nimport { WebVitalsAutocapture } from './extensions/web-vitals'\nimport { Heatmaps } from './heatmaps'\nimport { PageViewManager } from './page-view'\nimport { PostHogExceptions } from './posthog-exceptions'\nimport { PostHogFeatureFlags } from './posthog-featureflags'\nimport { PostHogPersistence } from './posthog-persistence'\nimport { PostHogSurveys } from './posthog-surveys'\nimport {\n    DisplaySurveyOptions,\n    SurveyCallback,\n    SurveyEventName,\n    SurveyEventProperties,\n    SurveyRenderReason,\n} from './posthog-surveys-types'\nimport { RateLimiter } from './rate-limiter'\nimport { RemoteConfigLoader } from './remote-config'\nimport { extendURLParams, request, SUPPORTS_REQUEST } from './request'\nimport { DEFAULT_FLUSH_INTERVAL_MS, RequestQueue } from './request-queue'\nimport { RetryQueue } from './retry-queue'\nimport { ScrollManager } from './scroll-manager'\nimport { SessionPropsManager } from './session-props'\nimport { SessionIdManager } from './sessionid'\nimport { SiteApps } from './site-apps'\nimport { localStore } from './storage'\nimport {\n    CaptureOptions,\n    CaptureResult,\n    Compression,\n    ConfigDefaults,\n    EarlyAccessFeatureCallback,\n    EarlyAccessFeatureStage,\n    EventName,\n    FeatureFlagsCallback,\n    JsonType,\n    PostHogConfig,\n    Properties,\n    Property,\n    QueuedRequestWithOptions,\n    RemoteConfig,\n    RequestCallback,\n    SessionIdChangedCallback,\n    SnippetArrayItem,\n    ToolbarParams,\n} from './types'\nimport {\n    _copyAndTruncateStrings,\n    addEventListener,\n    each,\n    eachArray,\n    extend,\n    isCrossDomainCookie,\n    migrateConfigField,\n    safewrapClass,\n} from './utils'\nimport { isLikelyBot } from './utils/blocked-uas'\nimport { getEventProperties } from './utils/event-utils'\nimport { assignableWindow, document, location, navigator, userAgent, window } from './utils/globals'\nimport { logger } from './utils/logger'\nimport { getPersonPropertiesHash } from './utils/property-utils'\nimport { RequestRouter, RequestRouterRegion } from './utils/request-router'\nimport { SimpleEventEmitter } from './utils/simple-event-emitter'\nimport {\n    DEFAULT_DISPLAY_SURVEY_OPTIONS,\n    getSurveyInteractionProperty,\n    setSurveySeenOnLocalStorage,\n} from './utils/survey-utils'\nimport {\n    isEmptyString,\n    isFunction,\n    isKnownUnsafeEditableEvent,\n    isNullish,\n    isNumber,\n    isString,\n    isUndefined,\n    includes,\n    isDistinctIdStringLike,\n    isArray,\n    isEmptyObject,\n    isObject,\n} from '@posthog/core'\nimport { uuidv7 } from './uuidv7'\nimport { WebExperiments } from './web-experiments'\nimport { ExternalIntegrations } from './extensions/external-integration'\nimport { SessionRecording } from './extensions/replay/session-recording'\n\n/*\nSIMPLE STYLE GUIDE:\n\nUse TypeScript accessibility modifiers, e.g. private/protected\n\nIf something is not part of the public interface:\n* prefix it with _ to allow mangling\n* prefix it with __ to disable mangling, but signal that it is internal\n\nGlobals should be all caps\n*/\n\n/* posthog.init is called with `Partial<PostHogConfig>`\n * and we want to ensure that only valid keys are passed to the config object.\n * TypeScript does not enforce that the object passed does not have extra keys.\n * So someone can call with { bootstrap: { distinctId: '123'} }\n * which is not a valid key. They should have passed distinctID (upper case D).\n * That's a really tricky mistake to spot.\n * The OnlyValidKeys type ensures that only keys that are valid in the PostHogConfig type are allowed.\n */\ntype OnlyValidKeys<T, Shape> = T extends Shape ? (Exclude<keyof T, keyof Shape> extends never ? T : never) : never\n\nconst instances: Record<string, PostHog> = {}\n\n// some globals for comparisons\nconst __NOOP = () => {}\n\nconst PRIMARY_INSTANCE_NAME = 'posthog'\n\n/*\n * Dynamic... constants? Is that an oxymoron?\n */\n// http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n// https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#withCredentials\n\n// IE<10 does not support cross-origin XHR's but script tags\n// with defer won't block window.onload; ENQUEUE_REQUESTS\n// should only be true for Opera<12\nlet ENQUEUE_REQUESTS = !SUPPORTS_REQUEST && userAgent?.indexOf('MSIE') === -1 && userAgent?.indexOf('Mozilla') === -1\n\n// NOTE: Remember to update `types.ts` when changing a default value\n// to guarantee documentation is up to date, make sure to also update our website docs\n// NOTE²: This shouldn't ever change because we try very hard to be backwards-compatible\nexport const defaultConfig = (defaults?: ConfigDefaults): PostHogConfig => ({\n    api_host: 'https://us.i.posthog.com',\n    ui_host: null,\n    token: '',\n    autocapture: true,\n    rageclick: true,\n    cross_subdomain_cookie: isCrossDomainCookie(document?.location),\n    persistence: 'localStorage+cookie', // up to 1.92.0 this was 'cookie'. It's easy to migrate as 'localStorage+cookie' will migrate data from cookie storage\n    persistence_name: '',\n    loaded: __NOOP,\n    save_campaign_params: true,\n    custom_campaign_params: [],\n    custom_blocked_useragents: [],\n    save_referrer: true,\n    capture_pageview: defaults === '2025-05-24' ? 'history_change' : true,\n    capture_pageleave: 'if_capture_pageview', // We'll only capture pageleave events if capture_pageview is also true\n    defaults: defaults ?? 'unset',\n    debug: (location && isString(location?.search) && location.search.indexOf('__posthog_debug=true') !== -1) || false,\n    cookie_expiration: 365,\n    upgrade: false,\n    disable_session_recording: false,\n    disable_persistence: false,\n    disable_web_experiments: true, // disabled in beta.\n    disable_surveys: false,\n    disable_surveys_automatic_display: false,\n    disable_external_dependency_loading: false,\n    enable_recording_console_log: undefined, // When undefined, it falls back to the server-side setting\n    secure_cookie: window?.location?.protocol === 'https:',\n    ip: false,\n    opt_out_capturing_by_default: false,\n    opt_out_persistence_by_default: false,\n    opt_out_useragent_filter: false,\n    opt_out_capturing_persistence_type: 'localStorage',\n    consent_persistence_name: null,\n    opt_out_capturing_cookie_prefix: null,\n    opt_in_site_apps: false,\n    property_denylist: [],\n    respect_dnt: false,\n    sanitize_properties: null,\n    request_headers: {}, // { header: value, header2: value }\n    request_batching: true,\n    properties_string_max_length: 65535,\n    session_recording: {},\n    mask_all_element_attributes: false,\n    mask_all_text: false,\n    mask_personal_data_properties: false,\n    custom_personal_data_properties: [],\n    advanced_disable_flags: false,\n    advanced_disable_decide: false,\n    advanced_disable_feature_flags: false,\n    advanced_disable_feature_flags_on_first_load: false,\n    advanced_only_evaluate_survey_feature_flags: false,\n    advanced_enable_surveys: false,\n    advanced_disable_toolbar_metrics: false,\n    feature_flag_request_timeout_ms: 3000,\n    surveys_request_timeout_ms: SURVEYS_REQUEST_TIMEOUT_MS,\n    on_request_error: (res) => {\n        const error = 'Bad HTTP status: ' + res.statusCode + ' ' + res.text\n        logger.error(error)\n    },\n    get_device_id: (uuid) => uuid,\n    capture_performance: undefined,\n    name: 'posthog',\n    bootstrap: {},\n    disable_compression: false,\n    session_idle_timeout_seconds: 30 * 60, // 30 minutes\n    person_profiles: 'identified_only',\n    before_send: undefined,\n    request_queue_config: { flush_interval_ms: DEFAULT_FLUSH_INTERVAL_MS },\n    error_tracking: {},\n\n    // Used for internal testing\n    _onCapture: __NOOP,\n\n    // make the default be lazy loading replay\n    __preview_eager_load_replay: false,\n})\n\nexport const configRenames = (origConfig: Partial<PostHogConfig>): Partial<PostHogConfig> => {\n    const renames: Partial<PostHogConfig> = {}\n    if (!isUndefined(origConfig.process_person)) {\n        renames.person_profiles = origConfig.process_person\n    }\n    if (!isUndefined(origConfig.xhr_headers)) {\n        renames.request_headers = origConfig.xhr_headers\n    }\n    if (!isUndefined(origConfig.cookie_name)) {\n        renames.persistence_name = origConfig.cookie_name\n    }\n    if (!isUndefined(origConfig.disable_cookie)) {\n        renames.disable_persistence = origConfig.disable_cookie\n    }\n    if (!isUndefined(origConfig.store_google)) {\n        renames.save_campaign_params = origConfig.store_google\n    }\n    if (!isUndefined(origConfig.verbose)) {\n        renames.debug = origConfig.verbose\n    }\n    // on_xhr_error is not present, as the type is different to on_request_error\n\n    // the original config takes priority over the renames\n    const newConfig = extend({}, renames, origConfig)\n\n    // merge property_blacklist into property_denylist\n    if (isArray(origConfig.property_blacklist)) {\n        if (isUndefined(origConfig.property_denylist)) {\n            newConfig.property_denylist = origConfig.property_blacklist\n        } else if (isArray(origConfig.property_denylist)) {\n            newConfig.property_denylist = [...origConfig.property_blacklist, ...origConfig.property_denylist]\n        } else {\n            logger.error('Invalid value for property_denylist config: ' + origConfig.property_denylist)\n        }\n    }\n\n    return newConfig\n}\n\nclass DeprecatedWebPerformanceObserver {\n    get _forceAllowLocalhost(): boolean {\n        return this.__forceAllowLocalhost\n    }\n\n    set _forceAllowLocalhost(value: boolean) {\n        logger.error(\n            'WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`'\n        )\n        this.__forceAllowLocalhost = value\n    }\n\n    private __forceAllowLocalhost: boolean = false\n}\n\n/**\n *\n * This is the SDK reference for the PostHog JavaScript Web SDK.\n * You can learn more about example usage in the\n * [JavaScript Web SDK documentation](/docs/libraries/js).\n * You can also follow [framework specific guides](/docs/frameworks)\n * to integrate PostHog into your project.\n *\n * This SDK is designed for browser environments.\n * Use the PostHog [Node.js SDK](/docs/libraries/node) for server-side usage.\n *\n * @constructor\n */\nexport class PostHog {\n    __loaded: boolean\n    config: PostHogConfig\n    _originalUserConfig?: Partial<PostHogConfig>\n\n    rateLimiter: RateLimiter\n    scrollManager: ScrollManager\n    pageViewManager: PageViewManager\n    featureFlags: PostHogFeatureFlags\n    surveys: PostHogSurveys\n    experiments: WebExperiments\n    toolbar: Toolbar\n    exceptions: PostHogExceptions\n    consent: ConsentManager\n\n    // These are instance-specific state created after initialisation\n    persistence?: PostHogPersistence\n    sessionPersistence?: PostHogPersistence\n    sessionManager?: SessionIdManager\n    sessionPropsManager?: SessionPropsManager\n    requestRouter: RequestRouter\n    siteApps?: SiteApps\n    autocapture?: Autocapture\n    heatmaps?: Heatmaps\n    webVitalsAutocapture?: WebVitalsAutocapture\n    exceptionObserver?: ExceptionObserver\n    deadClicksAutocapture?: DeadClicksAutocapture\n    historyAutocapture?: HistoryAutocapture\n\n    _requestQueue?: RequestQueue\n    _retryQueue?: RetryQueue\n    sessionRecording?: SessionRecording\n    externalIntegrations?: ExternalIntegrations\n    webPerformance = new DeprecatedWebPerformanceObserver()\n\n    _initialPageviewCaptured: boolean\n    _visibilityStateListener: (() => void) | null\n    _personProcessingSetOncePropertiesSent: boolean = false\n    _triggered_notifs: any\n    compression?: Compression\n    __request_queue: QueuedRequestWithOptions[]\n    analyticsDefaultEndpoint: string\n    version = Config.LIB_VERSION\n    _initialPersonProfilesConfig: 'always' | 'never' | 'identified_only' | null\n    _cachedPersonProperties: string | null\n\n    SentryIntegration: typeof SentryIntegration\n    sentryIntegration: (options?: SentryIntegrationOptions) => ReturnType<typeof sentryIntegration>\n\n    private _internalEventEmitter = new SimpleEventEmitter()\n\n    // Legacy property to support existing usage - this isn't technically correct but it's what it has always been - a proxy for flags being loaded\n    /** @deprecated Use `flagsEndpointWasHit` instead.  We migrated to using a new feature flag endpoint and the new method is more semantically accurate */\n    public get decideEndpointWasHit(): boolean {\n        return this.featureFlags?.hasLoadedFlags ?? false\n    }\n\n    public get flagsEndpointWasHit(): boolean {\n        return this.featureFlags?.hasLoadedFlags ?? false\n    }\n\n    /** DEPRECATED: We keep this to support existing usage but now one should just call .setPersonProperties */\n    people: {\n        set: (prop: string | Properties, to?: string, callback?: RequestCallback) => void\n        set_once: (prop: string | Properties, to?: string, callback?: RequestCallback) => void\n    }\n\n    constructor() {\n        this.config = defaultConfig()\n\n        this.SentryIntegration = SentryIntegration\n        this.sentryIntegration = (options?: SentryIntegrationOptions) => sentryIntegration(this, options)\n        this.__request_queue = []\n        this.__loaded = false\n        this.analyticsDefaultEndpoint = '/e/'\n        this._initialPageviewCaptured = false\n        this._visibilityStateListener = null\n        this._initialPersonProfilesConfig = null\n        this._cachedPersonProperties = null\n        this.featureFlags = new PostHogFeatureFlags(this)\n        this.toolbar = new Toolbar(this)\n        this.scrollManager = new ScrollManager(this)\n        this.pageViewManager = new PageViewManager(this)\n        this.surveys = new PostHogSurveys(this)\n        this.experiments = new WebExperiments(this)\n        this.exceptions = new PostHogExceptions(this)\n        this.rateLimiter = new RateLimiter(this)\n        this.requestRouter = new RequestRouter(this)\n        this.consent = new ConsentManager(this)\n        this.externalIntegrations = new ExternalIntegrations(this)\n        // NOTE: See the property definition for deprecation notice\n        this.people = {\n            set: (prop: string | Properties, to?: string, callback?: RequestCallback) => {\n                const setProps = isString(prop) ? { [prop]: to } : prop\n                this.setPersonProperties(setProps)\n                callback?.({} as any)\n            },\n            set_once: (prop: string | Properties, to?: string, callback?: RequestCallback) => {\n                const setProps = isString(prop) ? { [prop]: to } : prop\n                this.setPersonProperties(undefined, setProps)\n                callback?.({} as any)\n            },\n        }\n\n        this.on('eventCaptured', (data) => logger.info(`send \"${data?.event}\"`, data))\n    }\n\n    // Initialization methods\n\n    /**\n     * Initializes a new instance of the PostHog capturing object.\n     *\n     * @remarks\n     * All new instances are added to the main posthog object as sub properties (such as\n     * `posthog.library_name`) and also returned by this function. [Learn more about configuration options](https://github.com/posthog/posthog-js/blob/6e0e873/src/posthog-core.js#L57-L91)\n     *\n     * @example\n     * ```js\n     * // basic initialization\n     * posthog.init('<ph_project_api_key>', {\n     *     api_host: '<ph_client_api_host>'\n     * })\n     * ```\n     *\n     * @example\n     * ```js\n     * // multiple instances\n     * posthog.init('<ph_project_api_key>', {}, 'project1')\n     * posthog.init('<ph_project_api_key>', {}, 'project2')\n     * ```\n     *\n     * @public\n     *\n     * @param token - Your PostHog API token\n     * @param config - A dictionary of config options to override\n     * @param name - The name for the new posthog instance that you want created\n     *\n     * {@label Initialization}\n     *\n     * @returns The newly initialized PostHog instance\n     */\n    init(\n        token: string,\n        config?: OnlyValidKeys<Partial<PostHogConfig>, Partial<PostHogConfig>>,\n        name?: string\n    ): PostHog {\n        if (!name || name === PRIMARY_INSTANCE_NAME) {\n            // This means we are initializing the primary instance (i.e. this)\n            return this._init(token, config, name)\n        } else {\n            const namedPosthog = instances[name] ?? new PostHog()\n            namedPosthog._init(token, config, name)\n            instances[name] = namedPosthog\n\n            // Add as a property to the primary instance (this isn't type-safe but its how it was always done)\n            ;(instances[PRIMARY_INSTANCE_NAME] as any)[name] = namedPosthog\n\n            return namedPosthog\n        }\n    }\n\n    // posthog._init(token:string, config:object, name:string)\n    //\n    // This function sets up the current instance of the posthog\n    // library.  The difference between this method and the init(...)\n    // method is this one initializes the actual instance, whereas the\n    // init(...) method sets up a new library and calls _init on it.\n    //\n    // Note that there are operations that can be asynchronous, so we\n    // accept a callback that is called when all the asynchronous work\n    // is done. Note that we do not use promises because we want to be\n    // IE11 compatible. We could use polyfills, which would make the\n    // code a bit cleaner, but will add some overhead.\n    //\n    _init(token: string, config: Partial<PostHogConfig> = {}, name?: string): PostHog {\n        if (isUndefined(token) || isEmptyString(token)) {\n            logger.critical(\n                'PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()'\n            )\n            return this\n        }\n\n        if (this.__loaded) {\n            logger.warn('You have already initialized PostHog! Re-initializing is a no-op')\n            return this\n        }\n\n        this.__loaded = true\n        this.config = {} as PostHogConfig // will be set right below\n        this._originalUserConfig = config // Store original user config for migration\n        this._triggered_notifs = []\n\n        if (config.person_profiles) {\n            this._initialPersonProfilesConfig = config.person_profiles\n        }\n\n        this.set_config(\n            extend({}, defaultConfig(config.defaults), configRenames(config), {\n                name: name,\n                token: token,\n            })\n        )\n\n        if (this.config.on_xhr_error) {\n            logger.error('on_xhr_error is deprecated. Use on_request_error instead')\n        }\n\n        this.compression = config.disable_compression ? undefined : Compression.GZipJS\n\n        const persistenceDisabled = this._is_persistence_disabled()\n\n        this.persistence = new PostHogPersistence(this.config, persistenceDisabled)\n        this.sessionPersistence =\n            this.config.persistence === 'sessionStorage' || this.config.persistence === 'memory'\n                ? this.persistence\n                : new PostHogPersistence({ ...this.config, persistence: 'sessionStorage' }, persistenceDisabled)\n\n        // should I store the initial person profiles config in persistence?\n        const initialPersistenceProps = { ...this.persistence.props }\n        const initialSessionProps = { ...this.sessionPersistence.props }\n\n        this.register({ $initialization_time: new Date().toISOString() })\n\n        this._requestQueue = new RequestQueue(\n            (req) => this._send_retriable_request(req),\n            this.config.request_queue_config\n        )\n        this._retryQueue = new RetryQueue(this)\n        this.__request_queue = []\n\n        const startInCookielessMode =\n            this.config.cookieless_mode === 'always' ||\n            (this.config.cookieless_mode === 'on_reject' && this.consent.isExplicitlyOptedOut())\n\n        if (!startInCookielessMode) {\n            this.sessionManager = new SessionIdManager(this)\n            this.sessionPropsManager = new SessionPropsManager(this, this.sessionManager, this.persistence)\n        }\n\n        new TracingHeaders(this).startIfEnabledOrStop()\n\n        this.siteApps = new SiteApps(this)\n        this.siteApps?.init()\n\n        if (!startInCookielessMode) {\n            this.sessionRecording = new SessionRecording(this)\n            this.sessionRecording.startIfEnabledOrStop()\n        }\n\n        if (!this.config.disable_scroll_properties) {\n            this.scrollManager.startMeasuringScrollPosition()\n        }\n\n        this.autocapture = new Autocapture(this)\n        this.autocapture.startIfEnabled()\n        this.surveys.loadIfEnabled()\n\n        this.heatmaps = new Heatmaps(this)\n        this.heatmaps.startIfEnabled()\n\n        this.webVitalsAutocapture = new WebVitalsAutocapture(this)\n\n        this.exceptionObserver = new ExceptionObserver(this)\n        this.exceptionObserver.startIfEnabled()\n\n        this.deadClicksAutocapture = new DeadClicksAutocapture(this, isDeadClicksEnabledForAutocapture)\n        this.deadClicksAutocapture.startIfEnabled()\n\n        this.historyAutocapture = new HistoryAutocapture(this)\n        this.historyAutocapture.startIfEnabled()\n\n        // if any instance on the page has debug = true, we set the\n        // global debug to be true\n        Config.DEBUG = Config.DEBUG || this.config.debug\n        if (Config.DEBUG) {\n            logger.info('Starting in debug mode', {\n                this: this,\n                config,\n                thisC: { ...this.config },\n                p: initialPersistenceProps,\n                s: initialSessionProps,\n            })\n        }\n\n        // isUndefined doesn't provide typehint here so wouldn't reduce bundle as we'd need to assign\n        // eslint-disable-next-line posthog-js/no-direct-undefined-check\n        if (config.bootstrap?.distinctID !== undefined) {\n            const uuid = this.config.get_device_id(uuidv7())\n            const deviceID = config.bootstrap?.isIdentifiedID ? uuid : config.bootstrap.distinctID\n            this.persistence.set_property(USER_STATE, config.bootstrap?.isIdentifiedID ? 'identified' : 'anonymous')\n            this.register({\n                distinct_id: config.bootstrap.distinctID,\n                $device_id: deviceID,\n            })\n        }\n\n        if (this._hasBootstrappedFeatureFlags()) {\n            const activeFlags = Object.keys(config.bootstrap?.featureFlags || {})\n                .filter((flag) => !!config.bootstrap?.featureFlags?.[flag])\n                .reduce(\n                    (res: Record<string, string | boolean>, key) => (\n                        (res[key] = config.bootstrap?.featureFlags?.[key] || false), res\n                    ),\n                    {}\n                )\n            const featureFlagPayloads = Object.keys(config.bootstrap?.featureFlagPayloads || {})\n                .filter((key) => activeFlags[key])\n                .reduce((res: Record<string, JsonType>, key) => {\n                    if (config.bootstrap?.featureFlagPayloads?.[key]) {\n                        res[key] = config.bootstrap?.featureFlagPayloads?.[key]\n                    }\n                    return res\n                }, {})\n\n            this.featureFlags.receivedFeatureFlags({ featureFlags: activeFlags, featureFlagPayloads })\n        }\n\n        if (startInCookielessMode) {\n            this.register_once(\n                {\n                    distinct_id: COOKIELESS_SENTINEL_VALUE,\n                    $device_id: null,\n                },\n                ''\n            )\n        } else if (!this.get_distinct_id()) {\n            // There is no need to set the distinct id\n            // or the device id if something was already stored\n            // in the persistence\n            const uuid = this.config.get_device_id(uuidv7())\n\n            this.register_once(\n                {\n                    distinct_id: uuid,\n                    $device_id: uuid,\n                },\n                ''\n            )\n            // distinct id == $device_id is a proxy for anonymous user\n            this.persistence.set_property(USER_STATE, 'anonymous')\n        }\n        // Set up event handler for pageleave\n        // Use `onpagehide` if available, see https://calendar.perfplanet.com/2020/beaconing-in-practice/#beaconing-reliability-avoiding-abandons\n        //\n        // Not making it passive to try and force the browser to handle this before the page is unloaded\n        addEventListener(window, 'onpagehide' in self ? 'pagehide' : 'unload', this._handle_unload.bind(this), {\n            passive: false,\n        })\n\n        this.toolbar.maybeLoadToolbar()\n\n        // We want to avoid promises for IE11 compatibility, so we use callbacks here\n        if (config.segment) {\n            setupSegmentIntegration(this, () => this._loaded())\n        } else {\n            this._loaded()\n        }\n\n        if (isFunction(this.config._onCapture) && this.config._onCapture !== __NOOP) {\n            logger.warn('onCapture is deprecated. Please use `before_send` instead')\n            this.on('eventCaptured', (data) => this.config._onCapture(data.event, data))\n        }\n\n        if (this.config.ip) {\n            logger.warn(\n                'The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or \"Discard IP data\" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'\n            )\n        }\n\n        return this\n    }\n\n    _onRemoteConfig(config: RemoteConfig) {\n        if (!(document && document.body)) {\n            logger.info('document not ready yet, trying again in 500 milliseconds...')\n            setTimeout(() => {\n                this._onRemoteConfig(config)\n            }, 500)\n            return\n        }\n\n        this.compression = undefined\n        if (config.supportedCompression && !this.config.disable_compression) {\n            this.compression = includes(config['supportedCompression'], Compression.GZipJS)\n                ? Compression.GZipJS\n                : includes(config['supportedCompression'], Compression.Base64)\n                  ? Compression.Base64\n                  : undefined\n        }\n\n        if (config.analytics?.endpoint) {\n            this.analyticsDefaultEndpoint = config.analytics.endpoint\n        }\n\n        this.set_config({\n            person_profiles: this._initialPersonProfilesConfig ? this._initialPersonProfilesConfig : 'identified_only',\n        })\n\n        this.siteApps?.onRemoteConfig(config)\n        this.sessionRecording?.onRemoteConfig(config)\n        this.autocapture?.onRemoteConfig(config)\n        this.heatmaps?.onRemoteConfig(config)\n        this.surveys.onRemoteConfig(config)\n        this.webVitalsAutocapture?.onRemoteConfig(config)\n        this.exceptionObserver?.onRemoteConfig(config)\n        this.exceptions.onRemoteConfig(config)\n        this.deadClicksAutocapture?.onRemoteConfig(config)\n    }\n\n    _loaded(): void {\n        try {\n            this.config.loaded(this)\n        } catch (err) {\n            logger.critical('`loaded` function failed', err)\n        }\n\n        this._start_queue_if_opted_in()\n\n        // this happens after \"loaded\" so a user can call identify or any other things before the pageview fires\n        if (this.config.capture_pageview) {\n            // NOTE: We want to fire this on the next tick as the previous implementation had this side effect\n            // and some clients may rely on it\n            setTimeout(() => {\n                if (this.consent.isOptedIn() || this.config.cookieless_mode === 'always') {\n                    this._captureInitialPageview()\n                }\n            }, 1)\n        }\n\n        new RemoteConfigLoader(this).load()\n        this.featureFlags.flags()\n    }\n\n    _start_queue_if_opted_in(): void {\n        if (this.is_capturing()) {\n            if (this.config.request_batching) {\n                this._requestQueue?.enable()\n            }\n        }\n    }\n\n    _dom_loaded(): void {\n        if (this.is_capturing()) {\n            eachArray(this.__request_queue, (item) => this._send_retriable_request(item))\n        }\n\n        this.__request_queue = []\n        this._start_queue_if_opted_in()\n    }\n\n    _handle_unload(): void {\n        if (!this.config.request_batching) {\n            if (this._shouldCapturePageleave()) {\n                this.capture('$pageleave', null, { transport: 'sendBeacon' })\n            }\n            return\n        }\n\n        if (this._shouldCapturePageleave()) {\n            this.capture('$pageleave')\n        }\n\n        this._requestQueue?.unload()\n        this._retryQueue?.unload()\n    }\n\n    _send_request(options: QueuedRequestWithOptions): void {\n        if (!this.__loaded) {\n            return\n        }\n\n        if (ENQUEUE_REQUESTS) {\n            this.__request_queue.push(options)\n            return\n        }\n\n        if (this.rateLimiter.isServerRateLimited(options.batchKey)) {\n            return\n        }\n\n        options.transport = options.transport || this.config.api_transport\n        options.url = extendURLParams(options.url, {\n            // Whether to detect ip info or not\n            ip: this.config.ip ? 1 : 0,\n        })\n        options.headers = {\n            ...this.config.request_headers,\n        }\n        options.compression = options.compression === 'best-available' ? this.compression : options.compression\n        options.disableXHRCredentials = this.config.__preview_disable_xhr_credentials\n        if (this.config.__preview_disable_beacon) {\n            options.disableTransport = ['sendBeacon']\n        }\n\n        // Specially useful if you're doing SSR with NextJS\n        // Users must be careful when tweaking `cache` because they might get out-of-date feature flags\n        options.fetchOptions = options.fetchOptions || this.config.fetch_options\n\n        request({\n            ...options,\n            callback: (response) => {\n                this.rateLimiter.checkForLimiting(response)\n\n                if (response.statusCode >= 400) {\n                    this.config.on_request_error?.(response)\n                }\n\n                options.callback?.(response)\n            },\n        })\n    }\n\n    _send_retriable_request(options: QueuedRequestWithOptions): void {\n        if (this._retryQueue) {\n            this._retryQueue.retriableRequest(options)\n        } else {\n            this._send_request(options)\n        }\n    }\n\n    /**\n     * _execute_array() deals with processing any posthog function\n     * calls that were called before the PostHog library were loaded\n     * (and are thus stored in an array so they can be called later)\n     *\n     * Note: we fire off all the posthog function calls && user defined\n     * functions BEFORE we fire off posthog capturing calls. This is so\n     * identify/register/set_config calls can properly modify early\n     * capturing calls.\n     *\n     * @param {Array} array\n     */\n    _execute_array(array: SnippetArrayItem[]): void {\n        let fn_name\n        const alias_calls: SnippetArrayItem[] = []\n        const other_calls: SnippetArrayItem[] = []\n        const capturing_calls: SnippetArrayItem[] = []\n        eachArray(array, (item) => {\n            if (item) {\n                fn_name = item[0]\n                if (isArray(fn_name)) {\n                    capturing_calls.push(item) // chained call e.g. posthog.get_group().set()\n                } else if (isFunction(item)) {\n                    ;(item as any).call(this)\n                } else if (isArray(item) && fn_name === 'alias') {\n                    alias_calls.push(item)\n                } else if (isArray(item) && fn_name.indexOf('capture') !== -1 && isFunction((this as any)[fn_name])) {\n                    capturing_calls.push(item)\n                } else {\n                    other_calls.push(item)\n                }\n            }\n        })\n\n        const execute = function (calls: SnippetArrayItem[], thisArg: any) {\n            eachArray(\n                calls,\n                function (item) {\n                    if (isArray(item[0])) {\n                        // chained call\n                        let caller = thisArg\n                        each(item, function (call) {\n                            caller = caller[call[0]].apply(caller, call.slice(1))\n                        })\n                    } else {\n                        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                        // @ts-ignore\n                        this[item[0]].apply(this, item.slice(1))\n                    }\n                },\n                thisArg\n            )\n        }\n\n        execute(alias_calls, this)\n        execute(other_calls, this)\n        execute(capturing_calls, this)\n    }\n\n    _hasBootstrappedFeatureFlags(): boolean {\n        return (\n            (this.config.bootstrap?.featureFlags && Object.keys(this.config.bootstrap?.featureFlags).length > 0) ||\n            false\n        )\n    }\n\n    /**\n     * push() keeps the standard async-array-push\n     * behavior around after the lib is loaded.\n     * This is only useful for external integrations that\n     * do not wish to rely on our convenience methods\n     * (created in the snippet).\n     *\n     * @example\n     * ```js\n     * posthog.push(['register', { a: 'b' }]);\n     * ```\n     *\n     * @param {Array} item A [function_name, args...] array to be executed\n     */\n    push(item: SnippetArrayItem): void {\n        this._execute_array([item])\n    }\n\n    /**\n     * Captures an event with optional properties and configuration.\n     *\n     * @remarks\n     * You can capture arbitrary object-like values as events. [Learn about capture best practices](/docs/product-analytics/capture-events)\n     *\n     * @example\n     * ```js\n     * // basic event capture\n     * posthog.capture('cta-button-clicked', {\n     *     button_name: 'Get Started',\n     *     page: 'homepage'\n     * })\n     * ```\n     *\n     * {@label Capture}\n     *\n     * @public\n     *\n     * @param event_name - The name of the event (e.g., 'Sign Up', 'Button Click', 'Purchase')\n     * @param properties - Properties to include with the event describing the user or event details\n     * @param options - Optional configuration for the capture request\n     *\n     * @returns The capture result containing event data, or undefined if capture failed\n     */\n    capture(\n        event_name: EventName,\n        properties?: Properties | null,\n        options?: CaptureOptions\n    ): CaptureResult | undefined {\n        // While developing, a developer might purposefully _not_ call init(),\n        // in this case, we would like capture to be a noop.\n        if (!this.__loaded || !this.persistence || !this.sessionPersistence || !this._requestQueue) {\n            logger.uninitializedWarning('posthog.capture')\n            return\n        }\n\n        if (!this.is_capturing()) {\n            return\n        }\n\n        // typing doesn't prevent interesting data\n        if (isUndefined(event_name) || !isString(event_name)) {\n            logger.error('No event name provided to posthog.capture')\n            return\n        }\n\n        if (!this.config.opt_out_useragent_filter && this._is_bot()) {\n            return\n        }\n\n        const clientRateLimitContext = !options?.skip_client_rate_limiting\n            ? this.rateLimiter.clientRateLimitContext()\n            : undefined\n\n        if (clientRateLimitContext?.isRateLimited) {\n            logger.critical('This capture call is ignored due to client rate limiting.')\n            return\n        }\n\n        if (properties?.$current_url && !isString(properties?.$current_url)) {\n            logger.error(\n                'Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value.'\n            )\n            delete properties?.$current_url\n        }\n\n        // update persistence\n        this.sessionPersistence.update_search_keyword()\n\n        // The initial campaign/referrer props need to be stored in the regular persistence, as they are there to mimic\n        // the person-initial props. The non-initial versions are stored in the sessionPersistence, as they are sent\n        // with every event and used by the session table to create session-initial props.\n        if (this.config.save_campaign_params) {\n            this.sessionPersistence.update_campaign_params()\n        }\n        if (this.config.save_referrer) {\n            this.sessionPersistence.update_referrer_info()\n        }\n\n        if (this.config.save_campaign_params || this.config.save_referrer) {\n            this.persistence.set_initial_person_info()\n        }\n\n        const systemTime = new Date()\n        const timestamp = options?.timestamp || systemTime\n\n        const uuid = uuidv7()\n        let data: CaptureResult = {\n            uuid,\n            event: event_name,\n            properties: this.calculateEventProperties(event_name, properties || {}, timestamp, uuid),\n        }\n\n        if (clientRateLimitContext) {\n            data.properties['$lib_rate_limit_remaining_tokens'] = clientRateLimitContext.remainingTokens\n        }\n\n        const setProperties = options?.$set\n        if (setProperties) {\n            data.$set = options?.$set\n        }\n        const setOnceProperties = this._calculate_set_once_properties(options?.$set_once)\n        if (setOnceProperties) {\n            data.$set_once = setOnceProperties\n        }\n\n        data = _copyAndTruncateStrings(data, options?._noTruncate ? null : this.config.properties_string_max_length)\n        data.timestamp = timestamp\n        if (!isUndefined(options?.timestamp)) {\n            data.properties['$event_time_override_provided'] = true\n            data.properties['$event_time_override_system_time'] = systemTime\n        }\n\n        if (event_name === SurveyEventName.DISMISSED || event_name === SurveyEventName.SENT) {\n            const surveyId = properties?.[SurveyEventProperties.SURVEY_ID]\n            const surveyIteration = properties?.[SurveyEventProperties.SURVEY_ITERATION]\n            setSurveySeenOnLocalStorage({ id: surveyId, current_iteration: surveyIteration })\n            data.$set = {\n                ...data.$set,\n                [getSurveyInteractionProperty(\n                    { id: surveyId, current_iteration: surveyIteration },\n                    event_name === SurveyEventName.SENT ? 'responded' : 'dismissed'\n                )]: true,\n            }\n        }\n\n        // Top-level $set overriding values from the one from properties is taken from the plugin-server normalizeEvent\n        // This doesn't handle $set_once, because posthog-people doesn't either\n        const finalSet = { ...data.properties['$set'], ...data['$set'] }\n        if (!isEmptyObject(finalSet)) {\n            this.setPersonPropertiesForFlags(finalSet)\n        }\n\n        if (!isNullish(this.config.before_send)) {\n            const beforeSendResult = this._runBeforeSend(data)\n            if (!beforeSendResult) {\n                return\n            } else {\n                data = beforeSendResult\n            }\n        }\n\n        this._internalEventEmitter.emit('eventCaptured', data)\n\n        const requestOptions: QueuedRequestWithOptions = {\n            method: 'POST',\n            url: options?._url ?? this.requestRouter.endpointFor('api', this.analyticsDefaultEndpoint),\n            data,\n            compression: 'best-available',\n            batchKey: options?._batchKey,\n        }\n\n        if (this.config.request_batching && (!options || options?._batchKey) && !options?.send_instantly) {\n            this._requestQueue.enqueue(requestOptions)\n        } else {\n            this._send_retriable_request(requestOptions)\n        }\n\n        return data\n    }\n\n    _addCaptureHook(callback: (eventName: string, eventPayload?: CaptureResult) => void): () => void {\n        return this.on('eventCaptured', (data) => callback(data.event, data))\n    }\n\n    /**\n     * This method is used internally to calculate the event properties before sending it to PostHog. It can also be\n     * used by integrations (e.g. Segment) to enrich events with PostHog properties before sending them to Segment,\n     * which is required for some PostHog products to work correctly. (e.g. to have a correct $session_id property).\n     *\n     * @param {String} eventName The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', '$pageview', etc.\n     * @param {Object} eventProperties The properties to include with the event.\n     * @param {Date} [timestamp] The timestamp of the event, e.g. for calculating time on page. If not set, it'll automatically be set to the current time.\n     * @param {String} [uuid] The uuid of the event, e.g. for storing the $pageview ID.\n     * @param {Boolean} [readOnly] Set this if you do not intend to actually send the event, and therefore do not want to update internal state e.g. session timeout\n     *\n     * @internal\n     */\n    public calculateEventProperties(\n        eventName: string,\n        eventProperties: Properties,\n        timestamp?: Date,\n        uuid?: string,\n        readOnly?: boolean\n    ): Properties {\n        timestamp = timestamp || new Date()\n        if (!this.persistence || !this.sessionPersistence) {\n            return eventProperties\n        }\n\n        // set defaults\n        const startTimestamp = readOnly ? undefined : this.persistence.remove_event_timer(eventName)\n        let properties = { ...eventProperties }\n        properties['token'] = this.config.token\n        properties['$config_defaults'] = this.config.defaults\n\n        if (\n            this.config.cookieless_mode == 'always' ||\n            (this.config.cookieless_mode == 'on_reject' && this.consent.isExplicitlyOptedOut())\n        ) {\n            // Set a flag to tell the plugin server to use cookieless server hash mode\n            properties[COOKIELESS_MODE_FLAG_PROPERTY] = true\n        }\n\n        if (eventName === '$snapshot') {\n            const persistenceProps = { ...this.persistence.properties(), ...this.sessionPersistence.properties() }\n            properties['distinct_id'] = persistenceProps.distinct_id\n            if (\n                // we spotted one customer that was managing to send `false` for ~9k events a day\n                !(isString(properties['distinct_id']) || isNumber(properties['distinct_id'])) ||\n                isEmptyString(properties['distinct_id'])\n            ) {\n                logger.error('Invalid distinct_id for replay event. This indicates a bug in your implementation')\n            }\n            return properties\n        }\n\n        const infoProperties = getEventProperties(\n            this.config.mask_personal_data_properties,\n            this.config.custom_personal_data_properties\n        )\n\n        if (this.sessionManager) {\n            const { sessionId, windowId } = this.sessionManager.checkAndGetSessionAndWindowId(\n                readOnly,\n                timestamp.getTime()\n            )\n            properties['$session_id'] = sessionId\n            properties['$window_id'] = windowId\n        }\n        if (this.sessionPropsManager) {\n            extend(properties, this.sessionPropsManager.getSessionProps())\n        }\n\n        try {\n            if (this.sessionRecording) {\n                extend(properties, this.sessionRecording.sdkDebugProperties)\n            }\n            properties['$sdk_debug_retry_queue_size'] = this._retryQueue?.length\n        } catch (e: any) {\n            properties['$sdk_debug_error_capturing_properties'] = String(e)\n        }\n\n        if (this.requestRouter.region === RequestRouterRegion.CUSTOM) {\n            properties['$lib_custom_api_host'] = this.config.api_host\n        }\n\n        let pageviewProperties: Record<string, any>\n        if (eventName === '$pageview' && !readOnly) {\n            pageviewProperties = this.pageViewManager.doPageView(timestamp, uuid)\n        } else if (eventName === '$pageleave' && !readOnly) {\n            pageviewProperties = this.pageViewManager.doPageLeave(timestamp)\n        } else {\n            pageviewProperties = this.pageViewManager.doEvent()\n        }\n        properties = extend(properties, pageviewProperties)\n\n        if (eventName === '$pageview' && document) {\n            properties['title'] = document.title\n        }\n\n        // set $duration if time_event was previously called for this event\n        if (!isUndefined(startTimestamp)) {\n            const duration_in_ms = timestamp.getTime() - startTimestamp\n            properties['$duration'] = parseFloat((duration_in_ms / 1000).toFixed(3))\n        }\n\n        // this is only added when this.config.opt_out_useragent_filter is true,\n        // or it would always add \"browser\"\n        if (userAgent && this.config.opt_out_useragent_filter) {\n            properties['$browser_type'] = this._is_bot() ? 'bot' : 'browser'\n        }\n\n        // note: extend writes to the first object, so lets make sure we\n        // don't write to the persistence properties object and info\n        // properties object by passing in a new object\n\n        // update properties with pageview info and super-properties\n        properties = extend(\n            {},\n            infoProperties,\n            this.persistence.properties(),\n            this.sessionPersistence.properties(),\n            properties\n        )\n\n        properties['$is_identified'] = this._isIdentified()\n\n        if (isArray(this.config.property_denylist)) {\n            each(this.config.property_denylist, function (denylisted_prop) {\n                delete properties[denylisted_prop]\n            })\n        } else {\n            logger.error(\n                'Invalid value for property_denylist config: ' +\n                    this.config.property_denylist +\n                    ' or property_blacklist config: ' +\n                    this.config.property_blacklist\n            )\n        }\n\n        const sanitize_properties = this.config.sanitize_properties\n        if (sanitize_properties) {\n            logger.error('sanitize_properties is deprecated. Use before_send instead')\n            properties = sanitize_properties(properties, eventName)\n        }\n\n        // add person processing flag as very last step, so it cannot be overridden\n        const hasPersonProcessing = this._hasPersonProcessing()\n        properties['$process_person_profile'] = hasPersonProcessing\n        // if the event has person processing, ensure that all future events will too, even if the setting changes\n        if (hasPersonProcessing && !readOnly) {\n            this._requirePersonProcessing('_calculate_event_properties')\n        }\n\n        return properties\n    }\n\n    /** @deprecated - deprecated in 1.241.0, use `calculateEventProperties` instead  */\n    _calculate_event_properties = this.calculateEventProperties.bind(this)\n\n    /**\n     * Add additional set_once properties to the event when creating a person profile. This allows us to create the\n     * profile with mostly-accurate properties, despite earlier events not setting them. We do this by storing them in\n     * persistence.\n     * @param dataSetOnce\n     */\n    _calculate_set_once_properties(dataSetOnce?: Properties): Properties | undefined {\n        if (!this.persistence || !this._hasPersonProcessing()) {\n            return dataSetOnce\n        }\n\n        if (this._personProcessingSetOncePropertiesSent) {\n            // We only need to send these properties once. Sending them with later events would be redundant and would\n            // just require extra work on the server to process them.\n            return dataSetOnce\n        }\n        // if we're an identified person, send initial params with every event\n        const initialProps = this.persistence.get_initial_props()\n        const sessionProps = this.sessionPropsManager?.getSetOnceProps()\n        let setOnceProperties = extend({}, initialProps, sessionProps || {}, dataSetOnce || {})\n        const sanitize_properties = this.config.sanitize_properties\n        if (sanitize_properties) {\n            logger.error('sanitize_properties is deprecated. Use before_send instead')\n            setOnceProperties = sanitize_properties(setOnceProperties, '$set_once')\n        }\n        this._personProcessingSetOncePropertiesSent = true\n        if (isEmptyObject(setOnceProperties)) {\n            return undefined\n        }\n        return setOnceProperties\n    }\n\n    /**\n     * Registers super properties that are included with all events.\n     *\n     * @remarks\n     * Super properties are stored in persistence and automatically added to every event you capture.\n     * These values will overwrite any existing super properties with the same keys.\n     *\n     * @example\n     * ```js\n     * // register a single property\n     * posthog.register({ plan: 'premium' })\n     * ```\n     *\n     * {@label Capture}\n     *\n     * @example\n     * ```js\n     * // register multiple properties\n     * posthog.register({\n     *     email: 'user@example.com',\n     *     account_type: 'business',\n     *     signup_date: '2023-01-15'\n     * })\n     * ```\n     *\n     * @example\n     * ```js\n     * // register with custom expiration\n     * posthog.register({ campaign: 'summer_sale' }, 7) // expires in 7 days\n     * ```\n     *\n     * @public\n     *\n     * @param {Object} properties properties to store about the user\n     * @param {Number} [days] How many days since the user's last visit to store the super properties\n     */\n    register(properties: Properties, days?: number): void {\n        this.persistence?.register(properties, days)\n    }\n\n    /**\n     * Registers super properties only if they haven't been set before.\n     *\n     * @remarks\n     * Unlike `register()`, this method will not overwrite existing super properties.\n     * Use this for properties that should only be set once, like signup date or initial referrer.\n     *\n     * {@label Capture}\n     *\n     * @example\n     * ```js\n     * // register once-only properties\n     * posthog.register_once({\n     *     first_login_date: new Date().toISOString(),\n     *     initial_referrer: document.referrer\n     * })\n     * ```\n     *\n     * @example\n     * ```js\n     * // override existing value if it matches default\n     * posthog.register_once(\n     *     { user_type: 'premium' },\n     *     'unknown'  // overwrite if current value is 'unknown'\n     * )\n     * ```\n     *\n     * @public\n     *\n     * @param {Object} properties An associative array of properties to store about the user\n     * @param {*} [default_value] Value to override if already set in super properties (ex: 'False') Default: 'None'\n     * @param {Number} [days] How many days since the users last visit to store the super properties\n     */\n    register_once(properties: Properties, default_value?: Property, days?: number): void {\n        this.persistence?.register_once(properties, default_value, days)\n    }\n\n    /**\n     * Registers super properties for the current session only.\n     *\n     * @remarks\n     * Session super properties are automatically added to all events during the current browser session.\n     * Unlike regular super properties, these are cleared when the session ends and are stored in sessionStorage.\n     *\n     * {@label Capture}\n     *\n     * @example\n     * ```js\n     * // register session-specific properties\n     * posthog.register_for_session({\n     *     current_page_type: 'checkout',\n     *     ab_test_variant: 'control'\n     * })\n     * ```\n     *\n     * @example\n     * ```js\n     * // register properties for user flow tracking\n     * posthog.register_for_session({\n     *     selected_plan: 'pro',\n     *     completed_steps: 3,\n     *     flow_id: 'signup_flow_v2'\n     * })\n     * ```\n     *\n     * @public\n     *\n     * @param {Object} properties An associative array of properties to store about the user\n     */\n    register_for_session(properties: Properties): void {\n        this.sessionPersistence?.register(properties)\n    }\n\n    /**\n     * Removes a super property from persistent storage.\n     *\n     * @remarks\n     * This will stop the property from being automatically included in future events.\n     * The property will be permanently removed from the user's profile.\n     *\n     * {@label Capture}\n     *\n     * @example\n     * ```js\n     * // remove a super property\n     * posthog.unregister('plan_type')\n     * ```\n     *\n     * @public\n     *\n     * @param {String} property The name of the super property to remove\n     */\n    unregister(property: string): void {\n        this.persistence?.unregister(property)\n    }\n\n    /**\n     * Removes a session super property from the current session.\n     *\n     * @remarks\n     * This will stop the property from being automatically included in future events for this session.\n     * The property is removed from sessionStorage.\n     *\n     * {@label Capture}\n     *\n     * @example\n     * ```js\n     * // remove a session property\n     * posthog.unregister_for_session('current_flow')\n     * ```\n     *\n     * @public\n     *\n     * @param {String} property The name of the session super property to remove\n     */\n    unregister_for_session(property: string): void {\n        this.sessionPersistence?.unregister(property)\n    }\n\n    _register_single(prop: string, value: Property) {\n        this.register({ [prop]: value })\n    }\n\n    /**\n     * Gets the value of a feature flag for the current user.\n     *\n     * @remarks\n     * Returns the feature flag value which can be a boolean, string, or undefined.\n     * Supports multivariate flags that can return custom string values.\n     *\n     * {@label Feature flags}\n     *\n     * @example\n     * ```js\n     * // check boolean flag\n     * if (posthog.getFeatureFlag('new-feature')) {\n     *     // show new feature\n     * }\n     * ```\n     *\n     * @example\n     * ```js\n     * // check multivariate flag\n     * const variant = posthog.getFeatureFlag('button-color')\n     * if (variant === 'red') {\n     *     // show red button\n     * }\n     * ```\n     *\n     * @public\n     *\n     * @param {Object|String} prop Key of the feature flag.\n     * @param {Object|String} options (optional) If {send_event: false}, we won't send an $feature_flag_call event to PostHog.\n     */\n    getFeatureFlag(key: string, options?: { send_event?: boolean }): boolean | string | undefined {\n        return this.featureFlags.getFeatureFlag(key, options)\n    }\n\n    /**\n     * Get feature flag payload value matching key for user (supports multivariate flags).\n     *\n     * {@label Feature flags}\n     *\n     * @example\n     * ```js\n     * if(posthog.getFeatureFlag('beta-feature') === 'some-value') {\n     *      const someValue = posthog.getFeatureFlagPayload('beta-feature')\n     *      // do something\n     * }\n     * ```\n     *\n     * @public\n     *\n     * @param {Object|String} prop Key of the feature flag.\n     */\n    getFeatureFlagPayload(key: string): JsonType {\n        const payload = this.featureFlags.getFeatureFlagPayload(key)\n        try {\n            return JSON.parse(payload as any)\n        } catch {\n            return payload\n        }\n    }\n\n    /**\n     * Checks if a feature flag is enabled for the current user.\n     *\n     * @remarks\n     * Returns true if the flag is enabled, false if disabled, or undefined if not found.\n     * This is a convenience method that treats any truthy value as enabled.\n     *\n     * {@label Feature flags}\n     *\n     * @example\n     * ```js\n     * // simple feature flag check\n     * if (posthog.isFeatureEnabled('new-checkout')) {\n     *     showNewCheckout()\n     * }\n     * ```\n     *\n     * @example\n     * ```js\n     * // disable event tracking\n     * if (posthog.isFeatureEnabled('feature', { send_event: false })) {\n     *     // flag checked without sending $feature_flag_call event\n     * }\n     * ```\n     *\n     * @public\n     *\n     * @param {Object|String} prop Key of the feature flag.\n     * @param {Object|String} options (optional) If {send_event: false}, we won't send an $feature_flag_call event to PostHog.\n     */\n    isFeatureEnabled(key: string, options?: { send_event: boolean }): boolean | undefined {\n        return this.featureFlags.isFeatureEnabled(key, options)\n    }\n\n    /**\n     * Feature flag values are cached. If something has changed with your user and you'd like to refetch their flag values, call this method.\n     *\n     * {@label Feature flags}\n     *\n     * @example\n     * ```js\n     * posthog.reloadFeatureFlags()\n     * ```\n     *\n     * @public\n     */\n    reloadFeatureFlags(): void {\n        this.featureFlags.reloadFeatureFlags()\n    }\n\n    /**\n     * Opt the user in or out of an early access feature. [Learn more in the docs](/docs/feature-flags/early-access-feature-management#option-2-custom-implementation)\n     *\n     * {@label Feature flags}\n     *\n     * @example\n     * ```js\n     * const toggleBeta = (betaKey) => {\n     *   if (activeBetas.some(\n     *     beta => beta.flagKey === betaKey\n     *   )) {\n     *     posthog.updateEarlyAccessFeatureEnrollment(\n     *       betaKey,\n     *       false\n     *     )\n     *     setActiveBetas(\n     *       prevActiveBetas => prevActiveBetas.filter(\n     *         item => item.flagKey !== betaKey\n     *       )\n     *     );\n     *     return\n     *   }\n     *\n     *   posthog.updateEarlyAccessFeatureEnrollment(\n     *     betaKey,\n     *     true\n     *   )\n     *   setInactiveBetas(\n     *     prevInactiveBetas => prevInactiveBetas.filter(\n     *       item => item.flagKey !== betaKey\n     *     )\n     *   );\n     * }\n     *\n     * const registerInterest = (featureKey) => {\n     *   posthog.updateEarlyAccessFeatureEnrollment(\n     *     featureKey,\n     *     true\n     *   )\n     *   // Update UI to show user has registered\n     * }\n     * ```\n     *\n     * @public\n     *\n     * @param {String} key The key of the feature flag to update.\n     * @param {Boolean} isEnrolled Whether the user is enrolled in the feature.\n     * @param {String} [stage] The stage of the feature flag to update.\n     */\n    updateEarlyAccessFeatureEnrollment(key: string, isEnrolled: boolean, stage?: string): void {\n        this.featureFlags.updateEarlyAccessFeatureEnrollment(key, isEnrolled, stage)\n    }\n\n    /**\n     * Get the list of early access features. To check enrollment status, use `isFeatureEnabled`. [Learn more in the docs](/docs/feature-flags/early-access-feature-management#option-2-custom-implementation)\n     *\n     * {@label Feature flags}\n     *\n     * @example\n     * ```js\n     * const posthog = usePostHog()\n     * const activeFlags = useActiveFeatureFlags()\n     *\n     * const [activeBetas, setActiveBetas] = useState([])\n     * const [inactiveBetas, setInactiveBetas] = useState([])\n     * const [comingSoonFeatures, setComingSoonFeatures] = useState([])\n     *\n     * useEffect(() => {\n     *   posthog.getEarlyAccessFeatures((features) => {\n     *     // Filter features by stage\n     *     const betaFeatures = features.filter(feature => feature.stage === 'beta')\n     *     const conceptFeatures = features.filter(feature => feature.stage === 'concept')\n     *\n     *     setComingSoonFeatures(conceptFeatures)\n     *\n     *     if (!activeFlags || activeFlags.length === 0) {\n     *       setInactiveBetas(betaFeatures)\n     *       return\n     *     }\n     *\n     *     const activeBetas = betaFeatures.filter(\n     *             beta => activeFlags.includes(beta.flagKey)\n     *         );\n     *     const inactiveBetas = betaFeatures.filter(\n     *             beta => !activeFlags.includes(beta.flagKey)\n     *         );\n     *     setActiveBetas(activeBetas)\n     *     setInactiveBetas(inactiveBetas)\n     *   }, true, ['concept', 'beta'])\n     * }, [activeFlags])\n     * ```\n     *\n     * @public\n     *\n     * @param {Function} callback The callback function will be called when the early access features are loaded.\n     * @param {Boolean} [force_reload] Whether to force a reload of the early access features.\n     * @param {String[]} [stages] The stages of the early access features to load.\n     */\n    getEarlyAccessFeatures(\n        callback: EarlyAccessFeatureCallback,\n        force_reload = false,\n        stages?: EarlyAccessFeatureStage[]\n    ): void {\n        return this.featureFlags.getEarlyAccessFeatures(callback, force_reload, stages)\n    }\n\n    /**\n     * Exposes a set of events that PostHog will emit.\n     * e.g. `eventCaptured` is emitted immediately before trying to send an event\n     *\n     * Unlike  `onFeatureFlags` and `onSessionId` these are not called when the\n     * listener is registered, the first callback will be the next event\n     * _after_ registering a listener\n     *\n     * {@label Capture}\n     *\n     * @example\n     * ```js\n     * posthog.on('eventCaptured', (event) => {\n     *   console.log(event)\n     * })\n     * ```\n     *\n     * @public\n     *\n     * @param {String} event The event to listen for.\n     * @param {Function} cb The callback function to call when the event is emitted.\n     * @returns {Function} A function that can be called to unsubscribe the listener.\n     */\n    on(event: 'eventCaptured', cb: (...args: any[]) => void): () => void {\n        return this._internalEventEmitter.on(event, cb)\n    }\n\n    /**\n     * Register an event listener that runs when feature flags become available or when they change.\n     * If there are flags, the listener is called immediately in addition to being called on future changes.\n     * Note that this is not called only when we fetch feature flags from the server, but also when they change in the browser.\n     *\n     * {@label Feature flags}\n     *\n     * @example\n     * ```js\n     * posthog.onFeatureFlags(function(featureFlags, featureFlagsVariants, { errorsLoading }) {\n     *     // do something\n     * })\n     * ```\n     *\n     * @param callback - The callback function will be called once the feature flags are ready or when they are updated.\n     *                   It'll return a list of feature flags enabled for the user, the variants,\n     *                   and also a context object indicating whether we succeeded to fetch the flags or not.\n     * @returns A function that can be called to unsubscribe the listener. Used by `useEffect` when the component unmounts.\n     */\n    onFeatureFlags(callback: FeatureFlagsCallback): () => void {\n        return this.featureFlags.onFeatureFlags(callback)\n    }\n\n    /**\n     * Register an event listener that runs when surveys are loaded.\n     *\n     * Callback parameters:\n     * - surveys: Survey[]: An array containing all survey objects fetched from PostHog using the getSurveys method\n     * - context: { isLoaded: boolean, error?: string }: An object indicating if the surveys were loaded successfully\n     *\n     * {@label Surveys}\n     *\n     * @example\n     * ```js\n     * posthog.onSurveysLoaded((surveys, context) => { // do something })\n     * ```\n     *\n     *\n     * @param {Function} callback The callback function will be called when surveys are loaded or updated.\n     * @returns {Function} A function that can be called to unsubscribe the listener.\n     */\n    onSurveysLoaded(callback: SurveyCallback): () => void {\n        return this.surveys.onSurveysLoaded(callback)\n    }\n\n    /**\n     * Register an event listener that runs whenever the session id or window id change.\n     * If there is already a session id, the listener is called immediately in addition to being called on future changes.\n     *\n     * Can be used, for example, to sync the PostHog session id with a backend session.\n     *\n     * {@label Identification}\n     *\n     * @example\n     * ```js\n     * posthog.onSessionId(function(sessionId, windowId) { // do something })\n     * ```\n     *\n     * @param {Function} [callback] The callback function will be called once a session id is present or when it or the window id are updated.\n     * @returns {Function} A function that can be called to unsubscribe the listener. E.g. Used by `useEffect` when the component unmounts.\n     */\n    onSessionId(callback: SessionIdChangedCallback): () => void {\n        return this.sessionManager?.onSessionId(callback) ?? (() => {})\n    }\n\n    /**\n     * Get list of all surveys.\n     *\n     * {@label Surveys}\n     *\n     * @example\n     * ```js\n     * function callback(surveys, context) {\n     *   // do something\n     * }\n     *\n     * posthog.getSurveys(callback, false)\n     * ```\n     *\n     * @public\n     *\n     * @param {Function} [callback] Function that receives the array of surveys\n     * @param {Boolean} [forceReload] Optional boolean to force an API call for updated surveys\n     */\n    getSurveys(callback: SurveyCallback, forceReload = false): void {\n        this.surveys.getSurveys(callback, forceReload)\n    }\n\n    /**\n     * Get surveys that should be enabled for the current user. See [fetching surveys documentation](/docs/surveys/implementing-custom-surveys#fetching-surveys-manually) for more details.\n     *\n     * {@label Surveys}\n     *\n     * @example\n     * ```js\n     * posthog.getActiveMatchingSurveys((surveys) => {\n     *      // do something\n     * })\n     * ```\n     *\n     * @public\n     *\n     * @param {Function} [callback] The callback function will be called when the surveys are loaded or updated.\n     * @param {Boolean} [forceReload] Whether to force a reload of the surveys.\n     */\n    getActiveMatchingSurveys(callback: SurveyCallback, forceReload = false): void {\n        this.surveys.getActiveMatchingSurveys(callback, forceReload)\n    }\n\n    /**\n     * Although we recommend using popover surveys and display conditions,\n     * if you want to show surveys programmatically without setting up all\n     * the extra logic needed for API surveys, you can render surveys\n     * programmatically with the renderSurvey method.\n     *\n     * This takes a survey ID and an HTML selector to render an unstyled survey.\n     *\n     * {@label Surveys}\n     *\n     * @example\n     * ```js\n     * posthog.renderSurvey(coolSurveyID, '#survey-container')\n     * ```\n     *\n     * @deprecated Use displaySurvey instead - it's more complete and also supports popover surveys.\n     *\n     * @public\n     *\n     * @param {String} surveyId The ID of the survey to render.\n     * @param {String} selector The selector of the HTML element to render the survey on.\n     */\n    renderSurvey(surveyId: string, selector: string): void {\n        this.surveys.renderSurvey(surveyId, selector)\n    }\n\n    /**\n     * Display a survey programmatically as either a popover or inline element.\n     *\n     * @param {string} surveyId - The survey ID to display\n     * @param {DisplaySurveyOptions} options - Display configuration\n     *\n     * @example\n     * ```js\n     * // Display as popover (respects all conditions defined in the dashboard)\n     * posthog.displaySurvey('survey-id-123')\n     * ```\n     *\n     * @example\n     * ```js\n     * // Display inline in a specific element\n     * posthog.displaySurvey('survey-id-123', {\n     *   displayType: DisplaySurveyType.Inline,\n     *   selector: '#survey-container'\n     * })\n     * ```\n     *\n     * @example\n     * ```js\n     * // Force display ignoring conditions and delays\n     * posthog.displaySurvey('survey-id-123', {\n     *   displayType: DisplaySurveyType.Popover,\n     *   ignoreConditions: true,\n     *   ignoreDelay: true\n     * })\n     * ```\n     *\n     * {@label Surveys}\n     */\n    displaySurvey(surveyId: string, options: DisplaySurveyOptions = DEFAULT_DISPLAY_SURVEY_OPTIONS): void {\n        this.surveys.displaySurvey(surveyId, options)\n    }\n\n    /**\n     * Checks the feature flags associated with this Survey to see if the survey can be rendered.\n     * This method is deprecated because it's synchronous and won't return the correct result if surveys are not loaded.\n     * Use `canRenderSurveyAsync` instead.\n     *\n     * {@label Surveys}\n     *\n     *\n     * @deprecated\n     *\n     * @param surveyId The ID of the survey to check.\n     * @returns A SurveyRenderReason object indicating if the survey can be rendered.\n     */\n    canRenderSurvey(surveyId: string): SurveyRenderReason | null {\n        return this.surveys.canRenderSurvey(surveyId)\n    }\n\n    /**\n     * Checks the feature flags associated with this Survey to see if the survey can be rendered.\n     *\n     * {@label Surveys}\n     *\n     * @example\n     * ```js\n     * posthog.canRenderSurveyAsync(surveyId).then((result) => {\n     *     if (result.visible) {\n     *         // Survey can be rendered\n     *         console.log('Survey can be rendered')\n     *     } else {\n     *         // Survey cannot be rendered\n     *         console.log('Survey cannot be rendered:', result.disabledReason)\n     *     }\n     * })\n     * ```\n     *\n     * @public\n     *\n     * @param surveyId The ID of the survey to check.\n     * @param forceReload If true, the survey will be reloaded from the server, Default: false\n     * @returns A SurveyRenderReason object indicating if the survey can be rendered.\n     */\n    canRenderSurveyAsync(surveyId: string, forceReload = false): Promise<SurveyRenderReason> {\n        return this.surveys.canRenderSurveyAsync(surveyId, forceReload)\n    }\n\n    /**\n     * Associates a user with a unique identifier instead of an auto-generated ID.\n     * Learn more about [identifying users](/docs/product-analytics/identify)\n     *\n     * {@label Identification}\n     *\n     * @remarks\n     * By default, PostHog assigns each user a randomly generated `distinct_id`. Use this method to\n     * replace that ID with your own unique identifier (like a user ID from your database).\n     *\n     * @example\n     * ```js\n     * // basic identification\n     * posthog.identify('user_12345')\n     * ```\n     *\n     * @example\n     * ```js\n     * // identify with user properties\n     * posthog.identify('user_12345', {\n     *     email: 'user@example.com',\n     *     plan: 'premium'\n     * })\n     * ```\n     *\n     * @example\n     * ```js\n     * // identify with set and set_once properties\n     * posthog.identify('user_12345',\n     *     { last_login: new Date() },  // updates every time\n     *     { signup_date: new Date() }  // sets only once\n     * )\n     * ```\n     *\n     * @public\n     *\n     * @param {String} [new_distinct_id] A string that uniquely identifies a user. If not provided, the distinct_id currently in the persistent store (cookie or localStorage) will be used.\n     * @param {Object} [userPropertiesToSet] Optional: An associative array of properties to store about the user. Note: For feature flag evaluations, if the same key is present in the userPropertiesToSetOnce,\n     *  it will be overwritten by the value in userPropertiesToSet.\n     * @param {Object} [userPropertiesToSetOnce] Optional: An associative array of properties to store about the user. If property is previously set, this does not override that value.\n     */\n    identify(new_distinct_id?: string, userPropertiesToSet?: Properties, userPropertiesToSetOnce?: Properties): void {\n        if (!this.__loaded || !this.persistence) {\n            return logger.uninitializedWarning('posthog.identify')\n        }\n        if (isNumber(new_distinct_id)) {\n            new_distinct_id = (new_distinct_id as number).toString()\n            logger.warn(\n                'The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.'\n            )\n        }\n\n        //if the new_distinct_id has not been set ignore the identify event\n        if (!new_distinct_id) {\n            logger.error('Unique user id has not been set in posthog.identify')\n            return\n        }\n\n        if (isDistinctIdStringLike(new_distinct_id)) {\n            logger.critical(\n                `The string \"${new_distinct_id}\" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.`\n            )\n            return\n        }\n        if (new_distinct_id === COOKIELESS_SENTINEL_VALUE) {\n            logger.critical(\n                `The string \"${COOKIELESS_SENTINEL_VALUE}\" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.`\n            )\n            return\n        }\n\n        if (!this._requirePersonProcessing('posthog.identify')) {\n            return\n        }\n\n        const previous_distinct_id = this.get_distinct_id()\n        this.register({ $user_id: new_distinct_id })\n\n        if (!this.get_property('$device_id')) {\n            // The persisted distinct id might not actually be a device id at all\n            // it might be a distinct id of the user from before\n            const device_id = previous_distinct_id\n            this.register_once(\n                {\n                    $had_persisted_distinct_id: true,\n                    $device_id: device_id,\n                },\n                ''\n            )\n        }\n\n        // if the previous distinct id had an alias stored, then we clear it\n        if (new_distinct_id !== previous_distinct_id && new_distinct_id !== this.get_property(ALIAS_ID_KEY)) {\n            this.unregister(ALIAS_ID_KEY)\n            this.register({ distinct_id: new_distinct_id })\n        }\n\n        const isKnownAnonymous = (this.persistence.get_property(USER_STATE) || 'anonymous') === 'anonymous'\n\n        // send an $identify event any time the distinct_id is changing and the old ID is an anonymous ID\n        // - logic on the server will determine whether or not to do anything with it.\n        if (new_distinct_id !== previous_distinct_id && isKnownAnonymous) {\n            this.persistence.set_property(USER_STATE, 'identified')\n\n            // Update current user properties\n            this.setPersonPropertiesForFlags(\n                { ...(userPropertiesToSetOnce || {}), ...(userPropertiesToSet || {}) },\n                false\n            )\n\n            this.capture(\n                '$identify',\n                {\n                    distinct_id: new_distinct_id,\n                    $anon_distinct_id: previous_distinct_id,\n                },\n                { $set: userPropertiesToSet || {}, $set_once: userPropertiesToSetOnce || {} }\n            )\n\n            this._cachedPersonProperties = getPersonPropertiesHash(\n                new_distinct_id,\n                userPropertiesToSet,\n                userPropertiesToSetOnce\n            )\n\n            // let the reload feature flag request know to send this previous distinct id\n            // for flag consistency\n            this.featureFlags.setAnonymousDistinctId(previous_distinct_id)\n        } else if (userPropertiesToSet || userPropertiesToSetOnce) {\n            // If the distinct_id is not changing, but we have user properties to set, we can check if they have changed\n            // and if so, send a $set event\n\n            this.setPersonProperties(userPropertiesToSet, userPropertiesToSetOnce)\n        }\n\n        // Reload active feature flags if the user identity changes.\n        // Note we don't reload this on property changes as these get processed async\n        if (new_distinct_id !== previous_distinct_id) {\n            this.reloadFeatureFlags()\n            // also clear any stored flag calls\n            this.unregister(FLAG_CALL_REPORTED)\n        }\n    }\n\n    /**\n     * Sets properties on the person profile associated with the current `distinct_id`.\n     * Learn more about [identifying users](/docs/product-analytics/identify)\n     *\n     * {@label Identification}\n     *\n     * @remarks\n     * Updates user properties that are stored with the person profile in PostHog.\n     * If `person_profiles` is set to `identified_only` and no profile exists, this will create one.\n     *\n     * @example\n     * ```js\n     * // set user properties\n     * posthog.setPersonProperties({\n     *     email: 'user@example.com',\n     *     plan: 'premium'\n     * })\n     * ```\n     *\n     * @example\n     * ```js\n     * // set properties\n     * posthog.setPersonProperties(\n     *     { name: 'Max Hedgehog' },  // $set properties\n     *     { initial_url: '/blog' }   // $set_once properties\n     * )\n     * ```\n     *\n     * @public\n     *\n     * @param {Object} [userPropertiesToSet] Optional: An associative array of properties to store about the user. Note: For feature flag evaluations, if the same key is present in the userPropertiesToSetOnce,\n     *  it will be overwritten by the value in userPropertiesToSet.\n     * @param {Object} [userPropertiesToSetOnce] Optional: An associative array of properties to store about the user. If property is previously set, this does not override that value.\n     */\n    setPersonProperties(userPropertiesToSet?: Properties, userPropertiesToSetOnce?: Properties): void {\n        if (!userPropertiesToSet && !userPropertiesToSetOnce) {\n            return\n        }\n\n        if (!this._requirePersonProcessing('posthog.setPersonProperties')) {\n            return\n        }\n\n        const hash = getPersonPropertiesHash(this.get_distinct_id(), userPropertiesToSet, userPropertiesToSetOnce)\n\n        // if exactly this $set call has been sent before, don't send it again - determine based on hash of properties\n        if (this._cachedPersonProperties === hash) {\n            logger.info('A duplicate setPersonProperties call was made with the same properties. It has been ignored.')\n            return\n        }\n\n        // Update current user properties\n        this.setPersonPropertiesForFlags({ ...(userPropertiesToSetOnce || {}), ...(userPropertiesToSet || {}) })\n\n        this.capture('$set', { $set: userPropertiesToSet || {}, $set_once: userPropertiesToSetOnce || {} })\n\n        this._cachedPersonProperties = hash\n    }\n\n    /**\n     * Associates the user with a group for group-based analytics.\n     * Learn more about [groups](/docs/product-analytics/group-analytics)\n     *\n     * {@label Identification}\n     *\n     * @remarks\n     * Groups allow you to analyze users collectively (e.g., by organization, team, or account).\n     * This sets the group association for all subsequent events and reloads feature flags.\n     *\n     * @example\n     * ```js\n     * // associate user with an organization\n     * posthog.group('organization', 'org_12345', {\n     *     name: 'Acme Corp',\n     *     plan: 'enterprise'\n     * })\n     * ```\n     *\n     * @example\n     * ```js\n     * // associate with multiple group types\n     * posthog.group('organization', 'org_12345')\n     * posthog.group('team', 'team_67890')\n     * ```\n     *\n     * @public\n     *\n     * @param {String} groupType Group type (example: 'organization')\n     * @param {String} groupKey Group key (example: 'org::5')\n     * @param {Object} groupPropertiesToSet Optional properties to set for group\n     */\n    group(groupType: string, groupKey: string, groupPropertiesToSet?: Properties): void {\n        if (!groupType || !groupKey) {\n            logger.error('posthog.group requires a group type and group key')\n            return\n        }\n\n        if (!this._requirePersonProcessing('posthog.group')) {\n            return\n        }\n\n        const existingGroups = this.getGroups()\n\n        // if group key changes, remove stored group properties\n        if (existingGroups[groupType] !== groupKey) {\n            this.resetGroupPropertiesForFlags(groupType)\n        }\n\n        this.register({ $groups: { ...existingGroups, [groupType]: groupKey } })\n\n        if (groupPropertiesToSet) {\n            this.capture('$groupidentify', {\n                $group_type: groupType,\n                $group_key: groupKey,\n                $group_set: groupPropertiesToSet,\n            })\n            this.setGroupPropertiesForFlags({ [groupType]: groupPropertiesToSet })\n        }\n\n        // If groups change and no properties change, reload feature flags.\n        // The property change reload case is handled in setGroupPropertiesForFlags.\n        if (existingGroups[groupType] !== groupKey && !groupPropertiesToSet) {\n            this.reloadFeatureFlags()\n        }\n    }\n\n    /**\n     * Resets only the group properties of the user currently logged in.\n     * Learn more about [groups](/docs/product-analytics/group-analytics)\n     *\n     * {@label Identification}\n     *\n     * @example\n     * ```js\n     * posthog.resetGroups()\n     * ```\n     *\n     * @public\n     */\n    resetGroups(): void {\n        this.register({ $groups: {} })\n        this.resetGroupPropertiesForFlags()\n\n        // If groups changed, reload feature flags.\n        this.reloadFeatureFlags()\n    }\n\n    /**\n     * Sometimes, you might want to evaluate feature flags using properties that haven't been ingested yet,\n     * or were set incorrectly earlier. You can do so by setting properties the flag depends on with these calls:\n     *\n     * {@label Feature flags}\n     *\n     * @example\n     * ```js\n     * // Set properties\n     * posthog.setPersonPropertiesForFlags({'property1': 'value', property2: 'value2'})\n     * ```\n     *\n     * @example\n     * ```js\n     * // Set properties without reloading\n     * posthog.setPersonPropertiesForFlags({'property1': 'value', property2: 'value2'}, false)\n     * ```\n     *\n     * @public\n     *\n     * @param {Object} properties The properties to override.\n     * @param {Boolean} [reloadFeatureFlags] Whether to reload feature flags.\n     */\n    setPersonPropertiesForFlags(properties: Properties, reloadFeatureFlags = true): void {\n        this.featureFlags.setPersonPropertiesForFlags(properties, reloadFeatureFlags)\n    }\n\n    /**\n     * Resets the person properties for feature flags.\n     *\n     * {@label Feature flags}\n     *\n     * @public\n     *\n     * @example\n     * ```js\n     * posthog.resetPersonPropertiesForFlags()\n     * ```\n     */\n    resetPersonPropertiesForFlags(): void {\n        this.featureFlags.resetPersonPropertiesForFlags()\n    }\n\n    /**\n     * Set override group properties for feature flags.\n     * This is used when dealing with new groups / where you don't want to wait for ingestion\n     * to update properties.\n     * Takes in an object, the key of which is the group type.\n     *\n     * {@label Feature flags}\n     *\n     * @public\n     *\n     * @example\n     * ```js\n     * // Set properties with reload\n     * posthog.setGroupPropertiesForFlags({'organization': { name: 'CYZ', employees: '11' } })\n     * ```\n     *\n     * @example\n     * ```js\n     * // Set properties without reload\n     * posthog.setGroupPropertiesForFlags({'organization': { name: 'CYZ', employees: '11' } }, false)\n     * ```\n     *\n     * @param {Object} properties The properties to override, the key of which is the group type.\n     * @param {Boolean} [reloadFeatureFlags] Whether to reload feature flags.\n     */\n    setGroupPropertiesForFlags(properties: { [type: string]: Properties }, reloadFeatureFlags = true): void {\n        if (!this._requirePersonProcessing('posthog.setGroupPropertiesForFlags')) {\n            return\n        }\n        this.featureFlags.setGroupPropertiesForFlags(properties, reloadFeatureFlags)\n    }\n\n    /**\n     * Resets the group properties for feature flags.\n     *\n     * {@label Feature flags}\n     *\n     * @public\n     *\n     * @example\n     * ```js\n     * posthog.resetGroupPropertiesForFlags()\n     * ```\n     */\n    resetGroupPropertiesForFlags(group_type?: string): void {\n        this.featureFlags.resetGroupPropertiesForFlags(group_type)\n    }\n\n    /**\n     * Resets all user data and starts a fresh session.\n     *\n     * ⚠️ **Warning**: Only call this when a user logs out. Calling at the wrong time can cause split sessions.\n     *\n     * This clears:\n     * - Session ID and super properties\n     * - User identification (sets new random distinct_id)\n     * - Cached data and consent settings\n     *\n     * {@label Identification}\n     * @example\n     * ```js\n     * // reset on user logout\n     * function logout() {\n     *     posthog.reset()\n     *     // redirect to login page\n     * }\n     * ```\n     *\n     * @example\n     * ```js\n     * // reset and generate new device ID\n     * posthog.reset(true)  // also resets device_id\n     * ```\n     *\n     * @public\n     */\n    reset(reset_device_id?: boolean): void {\n        logger.info('reset')\n        if (!this.__loaded) {\n            return logger.uninitializedWarning('posthog.reset')\n        }\n        const device_id = this.get_property('$device_id')\n        this.consent.reset()\n        this.persistence?.clear()\n        this.sessionPersistence?.clear()\n        this.surveys.reset()\n        this.featureFlags.reset()\n        this.persistence?.set_property(USER_STATE, 'anonymous')\n        this.sessionManager?.resetSessionId()\n        this._cachedPersonProperties = null\n        if (this.config.cookieless_mode === 'always') {\n            this.register_once(\n                {\n                    distinct_id: COOKIELESS_SENTINEL_VALUE,\n                    $device_id: null,\n                },\n                ''\n            )\n        } else {\n            const uuid = this.config.get_device_id(uuidv7())\n            this.register_once(\n                {\n                    distinct_id: uuid,\n                    $device_id: reset_device_id ? uuid : device_id,\n                },\n                ''\n            )\n        }\n\n        this.register(\n            {\n                $last_posthog_reset: new Date().toISOString(),\n            },\n            1\n        )\n    }\n\n    /**\n     * Returns the current distinct ID for the user.\n     *\n     * @remarks\n     * This is either the auto-generated ID or the ID set via `identify()`.\n     * The distinct ID is used to associate events with users in PostHog.\n     *\n     * {@label Identification}\n     *\n     * @example\n     * ```js\n     * // get the current user ID\n     * const userId = posthog.get_distinct_id()\n     * console.log('Current user:', userId)\n     * ```\n     *\n     * @example\n     * ```js\n     * // use in loaded callback\n     * posthog.init('token', {\n     *     loaded: (posthog) => {\n     *         const id = posthog.get_distinct_id()\n     *         // use the ID\n     *     }\n     * })\n     * ```\n     *\n     * @public\n     *\n     * @returns The current distinct ID\n     */\n    get_distinct_id(): string {\n        return this.get_property('distinct_id')\n    }\n\n    /**\n     * Returns the current groups.\n     *\n     * {@label Identification}\n     *\n     * @public\n     *\n     * @returns The current groups\n     */\n    getGroups(): Record<string, any> {\n        return this.get_property('$groups') || {}\n    }\n\n    /**\n     * Returns the current session_id.\n     *\n     * @remarks\n     * This should only be used for informative purposes.\n     * Any actual internal use case for the session_id should be handled by the sessionManager.\n     *\n     * @public\n     *\n     * @returns The stored session ID for the current session. This may be an empty string if the client is not yet fully initialized.\n     */\n    get_session_id(): string {\n        return this.sessionManager?.checkAndGetSessionAndWindowId(true).sessionId ?? ''\n    }\n\n    /**\n     * Returns the Replay url for the current session.\n     *\n     * {@label Session replay}\n     *\n     * @public\n     *\n     * @example\n     * ```js\n     * // basic usage\n     * posthog.get_session_replay_url()\n     *\n     * @example\n     * ```js\n     * // timestamp\n     * posthog.get_session_replay_url({ withTimestamp: true })\n     * ```\n     *\n     * @example\n     * ```js\n     * // timestamp and lookback\n     * posthog.get_session_replay_url({\n     *   withTimestamp: true,\n     *   timestampLookBack: 30 // look back 30 seconds\n     * })\n     * ```\n     *\n     * @param options Options for the url\n     * @param options.withTimestamp Whether to include the timestamp in the url (defaults to false)\n     * @param options.timestampLookBack How many seconds to look back for the timestamp (defaults to 10)\n     */\n    get_session_replay_url(options?: { withTimestamp?: boolean; timestampLookBack?: number }): string {\n        if (!this.sessionManager) {\n            return ''\n        }\n        const { sessionId, sessionStartTimestamp } = this.sessionManager.checkAndGetSessionAndWindowId(true)\n        let url = this.requestRouter.endpointFor('ui', `/project/${this.config.token}/replay/${sessionId}`)\n        if (options?.withTimestamp && sessionStartTimestamp) {\n            const LOOK_BACK = options.timestampLookBack ?? 10\n            if (!sessionStartTimestamp) {\n                return url\n            }\n            const recordingStartTime = Math.max(\n                Math.floor((new Date().getTime() - sessionStartTimestamp) / 1000) - LOOK_BACK,\n                0\n            )\n            url += `?t=${recordingStartTime}`\n        }\n\n        return url\n    }\n\n    /**\n     * Creates an alias linking two distinct user identifiers. Learn more about [identifying users](/docs/product-analytics/identify)\n     *\n     * {@label Identification}\n     *\n     * @remarks\n     * PostHog will use this to link two distinct_ids going forward (not retroactively).\n     * Call this when a user signs up to connect their anonymous session with their account.\n     *\n     *\n     * @example\n     * ```js\n     * // link anonymous user to account on signup\n     * posthog.alias('user_12345')\n     * ```\n     *\n     * @example\n     * ```js\n     * // explicit alias with original ID\n     * posthog.alias('user_12345', 'anonymous_abc123')\n     * ```\n     *\n     * @public\n     *\n     * @param {String} alias A unique identifier that you want to use for this user in the future.\n     * @param {String} [original] The current identifier being used for this user.\n     */\n    alias(alias: string, original?: string): CaptureResult | void | number {\n        // If the $people_distinct_id key exists in persistence, there has been a previous\n        // posthog.people.identify() call made for this user. It is VERY BAD to make an alias with\n        // this ID, as it will duplicate users.\n        if (alias === this.get_property(PEOPLE_DISTINCT_ID_KEY)) {\n            logger.critical('Attempting to create alias for existing People user - aborting.')\n            return -2\n        }\n        if (!this._requirePersonProcessing('posthog.alias')) {\n            return\n        }\n\n        if (isUndefined(original)) {\n            original = this.get_distinct_id()\n        }\n        if (alias !== original) {\n            this._register_single(ALIAS_ID_KEY, alias)\n            return this.capture('$create_alias', { alias: alias, distinct_id: original })\n        } else {\n            logger.warn('alias matches current distinct_id - skipping api call.')\n            this.identify(alias)\n            return -1\n        }\n    }\n\n    /**\n     * Updates the configuration of the PostHog instance.\n     *\n     * {@label Initialization}\n     *\n     * @public\n     *\n     * @param {Partial<PostHogConfig>} config A dictionary of new configuration values to update\n     */\n    set_config(config: Partial<PostHogConfig>): void {\n        const oldConfig = { ...this.config }\n        if (isObject(config)) {\n            extend(this.config, configRenames(config))\n\n            const isPersistenceDisabled = this._is_persistence_disabled()\n            this.persistence?.update_config(this.config, oldConfig, isPersistenceDisabled)\n            this.sessionPersistence =\n                this.config.persistence === 'sessionStorage' || this.config.persistence === 'memory'\n                    ? this.persistence\n                    : new PostHogPersistence({ ...this.config, persistence: 'sessionStorage' }, isPersistenceDisabled)\n\n            if (localStore._is_supported() && localStore._get('ph_debug') === 'true') {\n                this.config.debug = true\n            }\n            if (this.config.debug) {\n                Config.DEBUG = true\n                logger.info('set_config', {\n                    config,\n                    oldConfig,\n                    newConfig: { ...this.config },\n                })\n            }\n\n            this.sessionRecording?.startIfEnabledOrStop()\n            this.autocapture?.startIfEnabled()\n            this.heatmaps?.startIfEnabled()\n            this.surveys.loadIfEnabled()\n            this._sync_opt_out_with_persistence()\n            this.externalIntegrations?.startIfEnabledOrStop()\n        }\n    }\n\n    /**\n     * turns session recording on, and updates the config option `disable_session_recording` to false\n     *\n     * {@label Session replay}\n     *\n     * @public\n     *\n     * @example\n     * ```js\n     * // Start and ignore controls\n     * posthog.startSessionRecording(true)\n     * ```\n     *\n     * @example\n     * ```js\n     * // Start and override controls\n     * posthog.startSessionRecording({\n     *   // you don't have to send all of these\n     *   sampling: true || false,\n     *   linked_flag: true || false,\n     *   url_trigger: true || false,\n     *   event_trigger: true || false\n     * })\n     * ```\n     *\n     * @param override.sampling - optional boolean to override the default sampling behavior - ensures the next session recording to start will not be skipped by sampling config.\n     * @param override.linked_flag - optional boolean to override the default linked_flag behavior - ensures the next session recording to start will not be skipped by linked_flag config.\n     * @param override.url_trigger - optional boolean to override the default url_trigger behavior - ensures the next session recording to start will not be skipped by url_trigger config.\n     * @param override.event_trigger - optional boolean to override the default event_trigger behavior - ensures the next session recording to start will not be skipped by event_trigger config.\n     * @param override - optional boolean to override the default sampling behavior - ensures the next session recording to start will not be skipped by sampling or linked_flag config. `true` is shorthand for { sampling: true, linked_flag: true }\n     */\n    startSessionRecording(\n        override?: { sampling?: boolean; linked_flag?: boolean; url_trigger?: true; event_trigger?: true } | true\n    ): void {\n        const overrideAll = override === true\n        const overrideConfig = {\n            sampling: overrideAll || !!override?.sampling,\n            linked_flag: overrideAll || !!override?.linked_flag,\n            url_trigger: overrideAll || !!override?.url_trigger,\n            event_trigger: overrideAll || !!override?.event_trigger,\n        }\n\n        if (Object.values(overrideConfig).some(Boolean)) {\n            // allow the session id check to rotate session id if necessary\n            this.sessionManager?.checkAndGetSessionAndWindowId()\n\n            if (overrideConfig.sampling) {\n                this.sessionRecording?.overrideSampling()\n            }\n\n            if (overrideConfig.linked_flag) {\n                this.sessionRecording?.overrideLinkedFlag()\n            }\n\n            if (overrideConfig.url_trigger) {\n                this.sessionRecording?.overrideTrigger('url')\n            }\n\n            if (overrideConfig.event_trigger) {\n                this.sessionRecording?.overrideTrigger('event')\n            }\n        }\n\n        this.set_config({ disable_session_recording: false })\n    }\n\n    /**\n     * turns session recording off, and updates the config option\n     * disable_session_recording to true\n     *\n     * {@label Session replay}\n     *\n     * @public\n     *\n     * @example\n     * ```js\n     * // Stop session recording\n     * posthog.stopSessionRecording()\n     * ```\n     */\n    stopSessionRecording(): void {\n        this.set_config({ disable_session_recording: true })\n    }\n\n    /**\n     * returns a boolean indicating whether session recording\n     * is currently running\n     *\n     * {@label Session replay}\n     *\n     * @public\n     *\n     * @example\n     * ```js\n     * // Stop session recording if it's running\n     * if (posthog.sessionRecordingStarted()) {\n     *   posthog.stopSessionRecording()\n     * }\n     * ```\n     */\n    sessionRecordingStarted(): boolean {\n        return !!this.sessionRecording?.started\n    }\n\n    /**\n     * Capture a caught exception manually\n     *\n     * {@label Error tracking}\n     *\n     * @public\n     *\n     * @example\n     * ```js\n     * // Capture a caught exception\n     * try {\n     *   // something that might throw\n     * } catch (error) {\n     *   posthog.captureException(error)\n     * }\n     * ```\n     *\n     * @example\n     * ```js\n     * // With additional properties\n     * posthog.captureException(error, {\n     *   customProperty: 'value',\n     *   anotherProperty: ['I', 'can be a list'],\n     *   ...\n     * })\n     * ```\n     *\n     * @param {Error} error The error to capture\n     * @param {Object} [additionalProperties] Any additional properties to add to the error event\n     * @returns {CaptureResult} The result of the capture\n     */\n    captureException(error: unknown, additionalProperties?: Properties): CaptureResult | undefined {\n        const syntheticException = new Error('PostHog syntheticException')\n        const errorToProperties = this.exceptions.buildProperties(error, {\n            handled: true,\n            syntheticException,\n        })\n        return this.exceptions.sendExceptionEvent({\n            ...errorToProperties,\n            ...additionalProperties,\n        })\n    }\n\n    /**\n     * returns a boolean indicating whether the [toolbar](/docs/toolbar) loaded\n     *\n     * {@label Toolbar}\n     *\n     * @public\n     *\n     * @param toolbarParams\n     * @returns {boolean} Whether the toolbar loaded\n     */\n\n    loadToolbar(params: ToolbarParams): boolean {\n        return this.toolbar.loadToolbar(params)\n    }\n\n    /**\n     * Returns the value of a super property. Returns undefined if the property doesn't exist.\n     *\n     * {@label Identification}\n     *\n     * @remarks\n     * get_property() can only be called after the PostHog library has finished loading.\n     * init() has a loaded function available to handle this automatically.\n     *\n     * @example\n     * ```js\n     * // grab value for '$user_id' after the posthog library has loaded\n     * posthog.init('<YOUR PROJECT TOKEN>', {\n     *     loaded: function(posthog) {\n     *         user_id = posthog.get_property('$user_id');\n     *     }\n     * });\n     * ```\n     * @public\n     *\n     * @param {String} property_name The name of the super property you want to retrieve\n     */\n    get_property(property_name: string): Property | undefined {\n        return this.persistence?.props[property_name]\n    }\n\n    /**\n     * Returns the value of the session super property named property_name. If no such\n     * property is set, getSessionProperty() will return the undefined value.\n     *\n     * {@label Identification}\n     *\n     * @remarks\n     * This is based on browser-level `sessionStorage`, NOT the PostHog session.\n     * getSessionProperty() can only be called after the PostHog library has finished loading.\n     * init() has a loaded function available to handle this automatically.\n     *\n     * @example\n     * ```js\n     * // grab value for 'user_id' after the posthog library has loaded\n     * posthog.init('YOUR PROJECT TOKEN', {\n     *     loaded: function(posthog) {\n     *         user_id = posthog.getSessionProperty('user_id');\n     *     }\n     * });\n     * ```\n     *\n     * @param {String} property_name The name of the session super property you want to retrieve\n     */\n    getSessionProperty(property_name: string): Property | undefined {\n        return this.sessionPersistence?.props[property_name]\n    }\n\n    /**\n     * Returns a string representation of the PostHog instance.\n     *\n     * {@label Initialization}\n     *\n     * @internal\n     */\n    toString(): string {\n        let name = this.config.name ?? PRIMARY_INSTANCE_NAME\n        if (name !== PRIMARY_INSTANCE_NAME) {\n            name = PRIMARY_INSTANCE_NAME + '.' + name\n        }\n        return name\n    }\n\n    _isIdentified(): boolean {\n        return (\n            this.persistence?.get_property(USER_STATE) === 'identified' ||\n            this.sessionPersistence?.get_property(USER_STATE) === 'identified'\n        )\n    }\n\n    _hasPersonProcessing(): boolean {\n        return !(\n            this.config.person_profiles === 'never' ||\n            (this.config.person_profiles === 'identified_only' &&\n                !this._isIdentified() &&\n                isEmptyObject(this.getGroups()) &&\n                !this.persistence?.props?.[ALIAS_ID_KEY] &&\n                !this.persistence?.props?.[ENABLE_PERSON_PROCESSING])\n        )\n    }\n\n    _shouldCapturePageleave(): boolean {\n        return (\n            this.config.capture_pageleave === true ||\n            (this.config.capture_pageleave === 'if_capture_pageview' &&\n                (this.config.capture_pageview === true || this.config.capture_pageview === 'history_change'))\n        )\n    }\n\n    /**\n     *  Creates a person profile for the current user, if they don't already have one and config.person_profiles is set\n     *  to 'identified_only'. Produces a warning and does not create a profile if config.person_profiles is set to\n     *  'never'. Learn more about [person profiles](/docs/product-analytics/identify)\n     *\n     * {@label Identification}\n     *\n     * @public\n     *\n     * @example\n     * ```js\n     * posthog.createPersonProfile()\n     * ```\n     */\n    createPersonProfile(): void {\n        if (this._hasPersonProcessing()) {\n            // if a person profile already exists, don't send an event when we don't need to\n            return\n        }\n        if (!this._requirePersonProcessing('posthog.createPersonProfile')) {\n            return\n        }\n        // sent a $set event. We don't set any properties here, but attribution props will be added later\n        this.setPersonProperties({}, {})\n    }\n\n    /**\n     * Enables person processing if possible, returns true if it does so or already enabled, false otherwise\n     *\n     * @param function_name\n     */\n    _requirePersonProcessing(function_name: string): boolean {\n        if (this.config.person_profiles === 'never') {\n            logger.error(\n                function_name + ' was called, but process_person is set to \"never\". This call will be ignored.'\n            )\n            return false\n        }\n        this._register_single(ENABLE_PERSON_PROCESSING, true)\n        return true\n    }\n\n    private _is_persistence_disabled(): boolean {\n        if (this.config.cookieless_mode === 'always') {\n            return true\n        }\n        const isOptedOut = this.consent.isOptedOut()\n        const defaultPersistenceDisabled =\n            this.config.opt_out_persistence_by_default || this.config.cookieless_mode === 'on_reject'\n\n        // TRICKY: We want a deterministic state for persistence so that a new pageload has the same persistence\n        return this.config.disable_persistence || (isOptedOut && !!defaultPersistenceDisabled)\n    }\n\n    private _sync_opt_out_with_persistence(): boolean {\n        const persistenceDisabled = this._is_persistence_disabled()\n\n        if (this.persistence?._disabled !== persistenceDisabled) {\n            this.persistence?.set_disabled(persistenceDisabled)\n        }\n        if (this.sessionPersistence?._disabled !== persistenceDisabled) {\n            this.sessionPersistence?.set_disabled(persistenceDisabled)\n        }\n        return persistenceDisabled\n    }\n\n    /**\n     * Opts the user into data capturing and persistence.\n     *\n     * {@label Privacy}\n     *\n     * @remarks\n     * Enables event tracking and data persistence (cookies/localStorage) for this PostHog instance.\n     * By default, captures an `$opt_in` event unless disabled.\n     *\n     * @example\n     * ```js\n     * // simple opt-in\n     * posthog.opt_in_capturing()\n     * ```\n     *\n     * @example\n     * ```js\n     * // opt-in with custom event and properties\n     * posthog.opt_in_capturing({\n     *     captureEventName: 'Privacy Accepted',\n     *     captureProperties: { source: 'banner' }\n     * })\n     * ```\n     *\n     * @example\n     * ```js\n     * // opt-in without capturing event\n     * posthog.opt_in_capturing({\n     *     captureEventName: false\n     * })\n     * ```\n     *\n     * @public\n     *\n     * @param {Object} [config] A dictionary of config options to override\n     * @param {string} [config.capture_event_name=$opt_in] Event name to be used for capturing the opt-in action. Set to `null` or `false` to skip capturing the optin event\n     * @param {Object} [config.capture_properties] Set of properties to be captured along with the opt-in action\n     */\n    opt_in_capturing(options?: {\n        captureEventName?: EventName | null | false /** event name to be used for capturing the opt-in action */\n        captureProperties?: Properties /** set of properties to be captured along with the opt-in action */\n    }): void {\n        if (this.config.cookieless_mode === 'always') {\n            logger.warn('Consent opt in/out is not valid with cookieless_mode=\"always\" and will be ignored')\n            return\n        }\n        if (this.config.cookieless_mode === 'on_reject' && this.consent.isExplicitlyOptedOut()) {\n            // If the user has explicitly opted out on_reject mode, then before we can start sending regular non-cookieless events\n            // we need to reset the instance to ensure that there is no leaking of state or data between the cookieless and regular events\n            this.reset(true)\n            this.sessionManager?.destroy()\n            this.sessionManager = new SessionIdManager(this)\n            if (this.persistence) {\n                this.sessionPropsManager = new SessionPropsManager(this, this.sessionManager, this.persistence)\n            }\n            this.sessionRecording = new SessionRecording(this)\n            this.sessionRecording.startIfEnabledOrStop()\n        }\n\n        this.consent.optInOut(true)\n        this._sync_opt_out_with_persistence()\n\n        // Start queue after opting in\n        this._start_queue_if_opted_in()\n\n        // Reinitialize surveys if we're in cookieless mode and just opted in\n        if (this.config.cookieless_mode == 'on_reject') {\n            this.surveys.loadIfEnabled()\n        }\n\n        // Don't capture if captureEventName is null or false\n        if (isUndefined(options?.captureEventName) || options?.captureEventName) {\n            this.capture(options?.captureEventName ?? '$opt_in', options?.captureProperties, { send_instantly: true })\n        }\n\n        if (this.config.capture_pageview) {\n            this._captureInitialPageview()\n        }\n    }\n\n    /**\n     * Opts the user out of data capturing and persistence.\n     *\n     * {@label Privacy}\n     *\n     * @remarks\n     * Disables event tracking and data persistence (cookies/localStorage) for this PostHog instance.\n     * If `opt_out_persistence_by_default` is true, SDK persistence will also be disabled.\n     *\n     * @example\n     * ```js\n     * // opt user out (e.g., on privacy settings page)\n     * posthog.opt_out_capturing()\n     * ```\n     *\n     * @public\n     */\n    opt_out_capturing(): void {\n        if (this.config.cookieless_mode === 'always') {\n            logger.warn('Consent opt in/out is not valid with cookieless_mode=\"always\" and will be ignored')\n            return\n        }\n\n        if (this.config.cookieless_mode === 'on_reject' && this.consent.isOptedIn()) {\n            // If the user has opted in, we need to reset the instance to ensure that there is no leaking of state or data between the cookieless and regular events\n            this.reset(true)\n        }\n\n        this.consent.optInOut(false)\n        this._sync_opt_out_with_persistence()\n\n        if (this.config.cookieless_mode === 'on_reject') {\n            // If cookieless_mode is 'on_reject', we start capturing events in cookieless mode\n            this.register({\n                distinct_id: COOKIELESS_SENTINEL_VALUE,\n                $device_id: null,\n            })\n            this.sessionManager?.destroy()\n            this.sessionManager = undefined\n            this.sessionPropsManager = undefined\n            this.sessionRecording?.stopRecording()\n            this.sessionRecording = undefined\n            this._captureInitialPageview()\n        }\n    }\n\n    /**\n     * Checks if the user has opted into data capturing.\n     *\n     * {@label Privacy}\n     *\n     * @remarks\n     * Returns the current consent status for event tracking and data persistence.\n     *\n     * @example\n     * ```js\n     * if (posthog.has_opted_in_capturing()) {\n     *     // show analytics features\n     * }\n     * ```\n     *\n     * @public\n     *\n     * @returns {boolean} current opt-in status\n     */\n    has_opted_in_capturing(): boolean {\n        return this.consent.isOptedIn()\n    }\n\n    /**\n     * Checks if the user has opted out of data capturing.\n     *\n     * {@label Privacy}\n     *\n     * @remarks\n     * Returns the current consent status for event tracking and data persistence.\n     *\n     * @example\n     * ```js\n     * if (posthog.has_opted_out_capturing()) {\n     *     // disable analytics features\n     * }\n     * ```\n     *\n     * @public\n     *\n     * @returns {boolean} current opt-out status\n     */\n    has_opted_out_capturing(): boolean {\n        return this.consent.isOptedOut()\n    }\n\n    /**\n     * Returns the explicit consent status of the user.\n     *\n     * @remarks\n     * This can be used to check if the user has explicitly opted in or out of data capturing, or neither. This does not\n     * take the default config options into account, only whether the user has made an explicit choice, so this can be\n     * used to determine whether to show an initial cookie banner or not.\n     *\n     * @example\n     * ```js\n     * const consentStatus = posthog.get_explicit_consent_status()\n     * if (consentStatus === \"granted\") {\n     *     // user has explicitly opted in\n     * } else if (consentStatus === \"denied\") {\n     *     // user has explicitly opted out\n     * } else if (consentStatus === \"pending\"){\n     *     // user has not made a choice, show consent banner\n     * }\n     * ```\n     *\n     * @public\n     *\n     * @returns {boolean | null} current explicit consent status\n     */\n    get_explicit_consent_status(): 'granted' | 'denied' | 'pending' {\n        const consent = this.consent.consent\n        return consent === ConsentStatus.GRANTED ? 'granted' : consent === ConsentStatus.DENIED ? 'denied' : 'pending'\n    }\n\n    /**\n     * Checks whether the PostHog library is currently capturing events.\n     *\n     * Usually this means that the user has not opted out of capturing, but the exact behaviour can be controlled by\n     * some config options.\n     *\n     * Additionally, if the cookieless_mode is set to 'on_reject', we will capture events in cookieless mode if the\n     * user has explicitly opted out.\n     *\n     * {@label Privacy}\n     *\n     * @see {PostHogConfig.cookieless_mode}\n     * @see {PostHogConfig.opt_out_persistence_by_default}\n     * @see {PostHogConfig.respect_dnt}\n     *\n     * @returns {boolean} whether the posthog library is capturing events\n     */\n    is_capturing(): boolean {\n        if (this.config.cookieless_mode === 'always') {\n            return true\n        }\n        if (this.config.cookieless_mode === 'on_reject') {\n            return this.consent.isExplicitlyOptedOut() || this.consent.isOptedIn()\n        } else {\n            return !this.has_opted_out_capturing()\n        }\n    }\n\n    /**\n     * Clear the user's opt in/out status of data capturing and cookies/localstorage for this PostHog instance\n     *\n     * {@label Privacy}\n     *\n     * @public\n     *\n     */\n    clear_opt_in_out_capturing(): void {\n        this.consent.reset()\n        this._sync_opt_out_with_persistence()\n    }\n\n    _is_bot(): boolean | undefined {\n        if (navigator) {\n            return isLikelyBot(navigator, this.config.custom_blocked_useragents)\n        } else {\n            return undefined\n        }\n    }\n\n    _captureInitialPageview(): void {\n        if (!document) {\n            return\n        }\n\n        // If page is not visible, add a listener to detect when the page becomes visible\n        // and trigger the pageview only then\n        // This is useful to avoid `prerender` calls from Chrome/Wordpress/SPAs\n        // that are not visible to the user\n\n        if (document.visibilityState !== 'visible') {\n            if (!this._visibilityStateListener) {\n                this._visibilityStateListener = this._captureInitialPageview.bind(this)\n                addEventListener(document, 'visibilitychange', this._visibilityStateListener)\n            }\n\n            return\n        }\n\n        // Extra check here to guarantee we only ever trigger a single `$pageview` event\n        if (!this._initialPageviewCaptured) {\n            this._initialPageviewCaptured = true\n            this.capture('$pageview', { title: document.title }, { send_instantly: true })\n\n            // After we've captured the initial pageview, we can remove the listener\n            if (this._visibilityStateListener) {\n                document.removeEventListener('visibilitychange', this._visibilityStateListener)\n                this._visibilityStateListener = null\n            }\n        }\n    }\n\n    /**\n     * Enables or disables debug mode for detailed logging.\n     *\n     * @remarks\n     * Debug mode logs all PostHog calls to the browser console for troubleshooting.\n     * Can also be enabled by adding `?__posthog_debug=true` to the URL.\n     *\n     * {@label Initialization}\n     *\n     * @example\n     * ```js\n     * // enable debug mode\n     * posthog.debug(true)\n     * ```\n     *\n     * @example\n     * ```js\n     * // disable debug mode\n     * posthog.debug(false)\n     * ```\n     *\n     * @public\n     *\n     * @param {boolean} [debug] If true, will enable debug mode.\n     */\n    debug(debug?: boolean): void {\n        if (debug === false) {\n            window?.console.log(\"You've disabled debug mode.\")\n            localStorage && localStorage.removeItem('ph_debug')\n            this.set_config({ debug: false })\n        } else {\n            window?.console.log(\n                \"You're now in debug mode. All calls to PostHog will be logged in your console.\\nYou can disable this with `posthog.debug(false)`.\"\n            )\n            localStorage && localStorage.setItem('ph_debug', 'true')\n            this.set_config({ debug: true })\n        }\n    }\n\n    /**\n     * Helper method to check if external API calls (flags/decide) should be disabled\n     * Handles migration from old `advanced_disable_decide` to new `advanced_disable_flags`\n     */\n    _shouldDisableFlags(): boolean {\n        // Check if advanced_disable_flags was explicitly set in original config\n        const originalConfig = this._originalUserConfig || {}\n        if ('advanced_disable_flags' in originalConfig) {\n            return !!originalConfig.advanced_disable_flags\n        }\n\n        // Check if advanced_disable_flags was set post-init (different from default false)\n        if (this.config.advanced_disable_flags !== false) {\n            return !!this.config.advanced_disable_flags\n        }\n\n        // Check for post-init changes to advanced_disable_decide\n        if (this.config.advanced_disable_decide === true) {\n            logger.warn(\n                \"Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. \" +\n                    'The old field will be removed in a future major version.'\n            )\n            return true\n        }\n\n        // Fall back to migration logic for original user config\n        return migrateConfigField(originalConfig, 'advanced_disable_flags', 'advanced_disable_decide', false, logger)\n    }\n\n    private _runBeforeSend(data: CaptureResult): CaptureResult | null {\n        if (isNullish(this.config.before_send)) {\n            return data\n        }\n\n        const fns = isArray(this.config.before_send) ? this.config.before_send : [this.config.before_send]\n        let beforeSendResult: CaptureResult | null = data\n        for (const fn of fns) {\n            beforeSendResult = fn(beforeSendResult)\n            if (isNullish(beforeSendResult)) {\n                const logMessage = `Event '${data.event}' was rejected in beforeSend function`\n                if (isKnownUnsafeEditableEvent(data.event)) {\n                    logger.warn(`${logMessage}. This can cause unexpected behavior.`)\n                } else {\n                    logger.info(logMessage)\n                }\n                return null\n            }\n            if (!beforeSendResult.properties || isEmptyObject(beforeSendResult.properties)) {\n                logger.warn(\n                    `Event '${data.event}' has no properties after beforeSend function, this is likely an error.`\n                )\n            }\n        }\n        return beforeSendResult\n    }\n\n    /**\n     * Returns the current page view ID.\n     *\n     * {@label Initialization}\n     *\n     * @public\n     *\n     * @returns {string} The current page view ID\n     */\n    public getPageViewId(): string | undefined {\n        return this.pageViewManager._currentPageview?.pageViewId\n    }\n\n    /**\n     * Capture written user feedback for a LLM trace. Numeric values are converted to strings.\n     *\n     * {@label LLM analytics}\n     *\n     * @public\n     *\n     * @param traceId The trace ID to capture feedback for.\n     * @param userFeedback The feedback to capture.\n     */\n    captureTraceFeedback(traceId: string | number, userFeedback: string) {\n        this.capture('$ai_feedback', {\n            $ai_trace_id: String(traceId),\n            $ai_feedback_text: userFeedback,\n        })\n    }\n\n    /**\n     * Capture a metric for a LLM trace. Numeric values are converted to strings.\n     *\n     * {@label LLM analytics}\n     *\n     * @public\n     *\n     * @param traceId The trace ID to capture the metric for.\n     * @param metricName The name of the metric to capture.\n     * @param metricValue The value of the metric to capture.\n     */\n    captureTraceMetric(traceId: string | number, metricName: string, metricValue: string | number | boolean) {\n        this.capture('$ai_metric', {\n            $ai_trace_id: String(traceId),\n            $ai_metric_name: metricName,\n            $ai_metric_value: String(metricValue),\n        })\n    }\n}\n\nsafewrapClass(PostHog, ['identify'])\n\nconst add_dom_loaded_handler = function () {\n    // Cross browser DOM Loaded support\n    function dom_loaded_handler() {\n        // function flag since we only want to execute this once\n        if ((dom_loaded_handler as any).done) {\n            return\n        }\n        ;(dom_loaded_handler as any).done = true\n\n        ENQUEUE_REQUESTS = false\n\n        each(instances, function (inst: PostHog) {\n            inst._dom_loaded()\n        })\n    }\n\n    if (document?.addEventListener) {\n        if (document.readyState === 'complete') {\n            // safari 4 can fire the DOMContentLoaded event before loading all\n            // external JS (including this file). you will see some copypasta\n            // on the internet that checks for 'complete' and 'loaded', but\n            // 'loaded' is an IE thing\n            dom_loaded_handler()\n        } else {\n            addEventListener(document, 'DOMContentLoaded', dom_loaded_handler, { capture: false })\n        }\n\n        return\n    }\n\n    // Only IE6-8 don't support `document.addEventListener` and we don't support them\n    // so let's simply log an error stating PostHog couldn't be initialized\n    // We're checking for `window` to avoid erroring out on a SSR context\n    if (window) {\n        logger.error(\"Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized\")\n    }\n}\n\nexport function init_from_snippet(): void {\n    const posthogMain = (instances[PRIMARY_INSTANCE_NAME] = new PostHog())\n\n    const snippetPostHog = assignableWindow['posthog']\n\n    if (snippetPostHog) {\n        /**\n         * The snippet uses some clever tricks to allow deferred loading of array.js (this code)\n         *\n         * window.posthog is an array which the queue of calls made before the lib is loaded\n         * It has methods attached to it to simulate the posthog object so for instance\n         *\n         * window.posthog.init(\"TOKEN\", {api_host: \"foo\" })\n         * window.posthog.capture(\"my-event\", {foo: \"bar\" })\n         *\n         * ... will mean that window.posthog will look like this:\n         * window.posthog == [\n         *  [\"my-event\", {foo: \"bar\"}]\n         * ]\n         *\n         * window.posthog[_i] == [\n         *   [\"TOKEN\", {api_host: \"foo\" }, \"posthog\"]\n         * ]\n         *\n         * If a name is given to the init function then the same as above is true but as a sub-property on the object:\n         *\n         * window.posthog.init(\"TOKEN\", {}, \"ph2\")\n         * window.posthog.ph2.people.set({foo: \"bar\"})\n         *\n         * window.posthog.ph2 == []\n         * window.posthog.people == [\n         *  [\"set\", {foo: \"bar\"}]\n         * ]\n         *\n         */\n\n        // Call all pre-loaded init calls properly\n\n        each(snippetPostHog['_i'], function (item: [token: string, config: Partial<PostHogConfig>, name: string]) {\n            if (item && isArray(item)) {\n                const instance = posthogMain.init(item[0], item[1], item[2])\n\n                const instanceSnippet = snippetPostHog[item[2]] || snippetPostHog\n\n                if (instance) {\n                    // Crunch through the people queue first - we queue this data up &\n                    // flush on identify, so it's better to do all these operations first\n                    instance._execute_array.call(instance.people, instanceSnippet.people)\n                    instance._execute_array(instanceSnippet)\n                }\n            }\n        })\n    }\n\n    assignableWindow['posthog'] = posthogMain\n\n    add_dom_loaded_handler()\n}\n\nexport function init_as_module(): PostHog {\n    const posthogMain = (instances[PRIMARY_INSTANCE_NAME] = new PostHog())\n\n    add_dom_loaded_handler()\n\n    return posthogMain\n}\n"]}