!function(){"use strict";var r="undefined"!=typeof window?window:void 0,e="undefined"!=typeof globalThis?globalThis:r,n=null==e?void 0:e.navigator;null==e||e.document,null==e||e.location,null==e||e.fetch,null!=e&&e.XMLHttpRequest&&"withCredentials"in new e.XMLHttpRequest&&e.XMLHttpRequest,null==e||e.AbortController,null==n||n.userAgent;var t=null!=r?r:{};function a(r,e,n,t,a,i,o){try{var u=r[i](o),c=u.value}catch(r){return void n(r)}u.done?e(c):Promise.resolve(c).then(t,a)}function i(r){return function(){var e=this,n=arguments;return new Promise((function(t,i){var o=r.apply(e,n);function u(r){a(o,t,i,u,c,"next",r)}function c(r){a(o,t,i,u,c,"throw",r)}u(void 0)}))}}function o(){return o=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)({}).hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},o.apply(null,arguments)}var u=Array.isArray,c=Object.prototype.toString,l=u||function(r){return"[object Array]"===c.call(r)},v=r=>void 0===r,s=r=>"[object String]"==c.call(r);function f(r){return null===r||"object"!=typeof r}function d(r,e){return Object.prototype.toString.call(r)==="[object "+e+"]"}function h(r){return!v(Event)&&function(r,e){try{return r instanceof e}catch(r){return!1}}(r,Event)}var p,y,w;function g(r){var e=globalThis._posthogChunkIds;if(e){var n=Object.keys(e);return w&&n.length===y?w:(y=n.length,w=n.reduce(((n,t)=>{p||(p={});var a=p[t];if(a)n[a[0]]=a[1];else for(var i=r(t),o=i.length-1;o>=0;o--){var u=i[o],c=null==u?void 0:u.filename,l=e[t];if(c&&l){n[c]=l,p[t]=[c,l];break}}return n}),{}))}}var b="?";function m(r,e,n,t){var a={platform:"web:javascript",filename:r,function:"<anonymous>"===e?b:e,in_app:!0};return v(n)||(a.lineno=n),v(t)||(a.colno=t),a}var E=(r,e)=>{var n=-1!==r.indexOf("safari-extension"),t=-1!==r.indexOf("safari-web-extension");return n||t?[-1!==r.indexOf("@")?r.split("@")[0]:b,n?"safari-extension:"+e:"safari-web-extension:"+e]:[r,e]},j=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,k=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,x=/\((\S*)(?::(\d+))(?::(\d+))\)/,O=r=>{var e=j.exec(r);if(e){var[,n,t,a]=e;return m(n,b,+t,+a)}var i=k.exec(r);if(i){if(i[2]&&0===i[2].indexOf("eval")){var o=x.exec(i[2]);o&&(i[2]=o[1],i[3]=o[2],i[4]=o[3])}var[u,c]=E(i[1]||b,i[2]);return m(c,u,i[3]?+i[3]:void 0,i[4]?+i[4]:void 0)}},S=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,A=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,M=r=>{var e=S.exec(r);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=A.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var t=e[3],a=e[1]||b;return[a,t]=E(a,t),m(t,a,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},R=/\(error: (.*)\)/,_=50;function C(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return function(r,n){void 0===n&&(n=0);for(var t=[],a=r.split("\n"),i=n;i<a.length;i++){var u=a[i];if(!(u.length>1024)){var c=R.test(u)?u.replace(R,"$1"):u;if(!c.match(/\S*Error: /)){for(var l of e){var v=l(c);if(v){t.push(v);break}}if(t.length>=_)break}}}return function(r){if(!r.length)return[];var e=Array.from(r);return e.reverse(),e.slice(0,_).map((r=>{return o({},r,{filename:r.filename||(n=e,n[n.length-1]||{}).filename,function:r.function||b});var n}))}(t)}}class D{constructor(r,e,n){void 0===r&&(r=[]),void 0===e&&(e=[]),void 0===n&&(n=[]),this.coercers=r,this.modifiers=n,this.stackParser=C(...e)}buildFromUnknown(r,e){void 0===e&&(e={});var n=e&&e.mechanism||{handled:!0,type:"generic"},t=this.buildCoercingContext(n,e,0).apply(r),a=this.buildParsingContext(),i=this.parseStacktrace(t,a);return{$exception_list:this.convertToExceptionList(i,n),$exception_level:"error"}}modifyFrames(r){var e=this;return i((function*(){for(var n of r)n.stacktrace&&n.stacktrace.frames&&l(n.stacktrace.frames)&&(n.stacktrace.frames=yield e.applyModifiers(n.stacktrace.frames));return r}))()}coerceFallback(r){var e;return{type:"Error",value:"Unknown error",stack:null==(e=r.syntheticException)?void 0:e.stack,synthetic:!0}}parseStacktrace(r,e){var n,t;return null!=r.cause&&(n=this.parseStacktrace(r.cause,e)),""!=r.stack&&null!=r.stack&&(t=this.applyChunkIds(this.stackParser(r.stack,r.synthetic?1:0),e.chunkIdMap)),o({},r,{cause:n,stack:t})}applyChunkIds(r,e){return r.map((r=>(r.filename&&e&&(r.chunk_id=e[r.filename]),r)))}applyCoercers(r,e){for(var n of this.coercers)if(n.match(r))return n.coerce(r,e);return this.coerceFallback(e)}applyModifiers(r){var e=this;return i((function*(){var n=r;for(var t of e.modifiers)n=yield t(n);return n}))()}convertToExceptionList(r,e){var n,t,a,i={type:r.type,value:r.value,mechanism:{type:null!==(n=e.type)&&void 0!==n?n:"generic",handled:null===(t=e.handled)||void 0===t||t,synthetic:null!==(a=r.synthetic)&&void 0!==a&&a}};r.stack&&(i.stacktrace={type:"raw",frames:r.stack});var u=[i];return null!=r.cause&&u.push(...this.convertToExceptionList(r.cause,o({},e,{handled:!0}))),u}buildParsingContext(){return{chunkIdMap:g(this.stackParser)}}buildCoercingContext(r,e,n){void 0===n&&(n=0);var t=(n,t)=>{if(t<=4){var a=this.buildCoercingContext(r,e,t);return this.applyCoercers(n,a)}};return o({},e,{syntheticException:0==n?e.syntheticException:void 0,mechanism:r,apply:r=>t(r,n),next:r=>t(r,n+1)})}}class P{match(r){return this.isDOMException(r)||this.isDOMError(r)}coerce(r,e){var n=s(r.stack);return{type:this.getType(r),value:this.getValue(r),stack:n?r.stack:void 0,cause:r.cause?e.next(r.cause):void 0,synthetic:!1}}getType(r){return this.isDOMError(r)?"DOMError":"DOMException"}getValue(r){var e=r.name||(this.isDOMError(r)?"DOMError":"DOMException");return r.message?e+": "+r.message:e}isDOMException(r){return d(r,"DOMException")}isDOMError(r){return d(r,"DOMError")}}class T{match(r){return r instanceof Error}coerce(r,e){return{type:this.getType(r),value:this.getMessage(r,e),stack:this.getStack(r),cause:r.cause?e.next(r.cause):void 0,synthetic:!1}}getType(r){return r.name||r.constructor.name}getMessage(r,e){var n=r.message;return n.error&&"string"==typeof n.error.message?String(n.error.message):String(n)}getStack(r){return r.stacktrace||r.stack||void 0}}class U{constructor(){}match(r){return d(r,"ErrorEvent")&&null!=r.error}coerce(r,e){var n,t=e.apply(r.error);return t||{type:"ErrorEvent",value:r.message,stack:null==(n=e.syntheticException)?void 0:n.stack,synthetic:!0}}}var I=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class z{match(r){return"string"==typeof r}coerce(r,e){var n,[t,a]=this.getInfos(r);return{type:null!=t?t:"Error",value:null!=a?a:r,stack:null==(n=e.syntheticException)?void 0:n.stack,synthetic:!0}}getInfos(r){var e="Error",n=r,t=r.match(I);return t&&(e=t[1],n=t[2]),[e,n]}}var F=["fatal","error","warning","log","info","debug"];function L(r,e){void 0===e&&(e=40);var n=Object.keys(r);if(n.sort(),!n.length)return"[object has no keys]";for(var t=n.length;t>0;t--){var a=n.slice(0,t).join(", ");if(!(a.length>e))return t===n.length||a.length<=e?a:a.slice(0,e)+"..."}return""}class H{match(r){return"object"==typeof r&&null!==r}coerce(r,e){var n,t=this.getErrorPropertyFromObject(r);return t?e.apply(t):{type:this.getType(r),value:this.getValue(r),stack:null==(n=e.syntheticException)?void 0:n.stack,level:this.isSeverityLevel(r.level)?r.level:"error",synthetic:!0}}getType(r){return h(r)?r.constructor.name:"Error"}getValue(r){if("name"in r&&"string"==typeof r.name){var e="'"+r.name+"' captured as exception";return"message"in r&&"string"==typeof r.message&&(e+=" with message: '"+r.message+"'"),e}if("message"in r&&"string"==typeof r.message)return r.message;var n=this.getObjectClassName(r);return(n&&"Object"!==n?"'"+n+"'":"Object")+" captured as exception with keys: "+L(r)}isSeverityLevel(r){return s(r)&&!(r=>s(r)&&0===r.trim().length)(r)&&F.indexOf(r)>=0}getErrorPropertyFromObject(r){for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var n=r[e];if(n instanceof Error)return n}}getObjectClassName(r){try{var e=Object.getPrototypeOf(r);return e?e.constructor.name:void 0}catch(r){return}}}class N{match(r){return h(r)}coerce(r,e){var n,t=r.constructor.name;return{type:t,value:t+" captured as exception with keys: "+L(r),stack:null==(n=e.syntheticException)?void 0:n.stack,synthetic:!0}}}class V{match(r){return f(r)}coerce(r,e){var n;return{type:"Error",value:"Primitive value captured as exception: "+String(r),stack:null==(n=e.syntheticException)?void 0:n.stack,synthetic:!0}}}class W{match(r){return d(r,"PromiseRejectionEvent")}coerce(r,e){var n,t=this.getUnhandledRejectionReason(r);return f(t)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(t),stack:null==(n=e.syntheticException)?void 0:n.stack,synthetic:!0}:e.apply(t)}getUnhandledRejectionReason(r){if(f(r))return r;try{if("reason"in r)return r.reason;if("detail"in r&&"reason"in r.detail)return r.detail.reason}catch(r){}return r}}var Y=e=>{var n={t:function(n){if(r&&t.POSTHOG_DEBUG&&!v(r.console)&&r.console){for(var a=("__rrweb_original__"in r.console[n]?r.console[n].__rrweb_original__:r.console[n]),i=arguments.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];a(e,...o)}},info:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];n.t("log",...e)},warn:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];n.t("warn",...e)},error:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];n.t("error",...e)},critical:function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];console.error(e,...n)},uninitializedWarning:r=>{n.error("You must initialize PostHog before calling "+r)},createLogger:r=>Y(e+" "+r)};return n},q=Y("[PostHog.js]").createLogger;null!=n&&n.sendBeacon;var B=q("[ExceptionAutocapture]"),G=new D([new P,new W,new U,new T,new N,new H,new z,new V],[O,M]);function J(r){var{event:e,error:n}=r;return G.buildFromUnknown(n||e,{mechanism:{handled:!1}})}var K={wrapOnError:e=>{var n=r;n||B.info("window not available, cannot wrap onerror");var t=n.onerror;return n.onerror=function(){for(var r,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=J({event:a[0],error:a[4]});return e(o),null!==(r=null==t?void 0:t(...a))&&void 0!==r&&r},n.onerror.__POSTHOG_INSTRUMENTED__=!0,()=>{var r;null==(r=n.onerror)||delete r.__POSTHOG_INSTRUMENTED__,n.onerror=t}},wrapUnhandledRejection:e=>{var n=r;n||B.info("window not available, cannot wrap onUnhandledRejection");var t=n.onunhandledrejection;return n.onunhandledrejection=function(r){var a,i=J({event:r});return e(i),null!==(a=null==t?void 0:t.apply(n,[r]))&&void 0!==a&&a},n.onunhandledrejection.__POSTHOG_INSTRUMENTED__=!0,()=>{var r;null==(r=n.onunhandledrejection)||delete r.__POSTHOG_INSTRUMENTED__,n.onunhandledrejection=t}},wrapConsoleError:r=>{var e=console;e||B.info("console not available, cannot wrap console.error");var n=e.error;return e.error=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=t.join(" "),o=J({error:t.find((r=>r instanceof Error)),event:i});return r(o),null==n?void 0:n(...t)},e.error.__POSTHOG_INSTRUMENTED__=!0,()=>{var r;null==(r=e.error)||delete r.__POSTHOG_INSTRUMENTED__,e.error=n}}};t.__PosthogExtensions__=t.__PosthogExtensions__||{},t.__PosthogExtensions__.errorWrappingFunctions=K,t.posthogErrorWrappingFunctions=K}();
//# sourceMappingURL=exception-autocapture.js.map
